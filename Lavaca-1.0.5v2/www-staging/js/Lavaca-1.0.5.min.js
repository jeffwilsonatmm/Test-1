/*
Lavaca 1.0.5
Copyright (c) 2012 Mutual Mobile

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

Contains components from or inspired by:

Simple Reset
(c) 2011 Eric Meyer
Released to public domain

jQuery v1.7.1
(c) 2011, John Resig
Dual licensed under the MIT or GPL Version 2 licenses.

Sizzle.js
(c) 2011, The Dojo Foundation
Released under the MIT, BSD, and GPL licenses.

Backbone.js 0.9.1 and Underscore.js 1.3.1
(c) 2012, Jeremy Ashkenas, DocumentCloud Inc
Released under the MIT license.

LinkedIn Fork of Dust.js 1.1
(c) 2010, Aleksander Williams
Released under the MIT license.

Zepto.js 0.8.0
(c) 2011 Thomas Fuchs
Released under the MIT license

ChildBrowser
(c) 2012 Jesse MacFadyen, Nitobi
Released under the MIT license

lz77.js
(c) 2009 Olle Törnström
Released under the MIT license

iScroll 4.1.9
(c) 2011 Matteo Spinelli
Released under the MIT license
*/
(function(b){String.prototype.trim===b&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});Array.prototype.reduce===b&&(Array.prototype.reduce=function(h){if(this===void 0||this===null)throw new TypeError;var j=Object(this),g=j.length>>>0,f=0,d;if(typeof h!="function")throw new TypeError;if(g==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)d=arguments[1];else{do{if(f in j){d=j[f++];break}if(++f>=g)throw new TypeError;}while(1)}for(;f<g;){f in j&&
(d=h.call(b,d,j[f],f,j));f++}return d})})();
var Zepto=function(){function b(a){return"[object Function]"==K.call(a)}function h(a){return a instanceof Object}function j(a){var e,c;if("[object Object]"!==K.call(a))return!1;c=b(a.constructor)&&a.constructor.prototype;if(!c||!hasOwnProperty.call(c,"isPrototypeOf"))return!1;for(e in a);return e===n||hasOwnProperty.call(a,e)}function g(a){return a instanceof Array}function f(a){return"number"==typeof a.length}function d(a){return a.filter(function(a){return a!==n&&null!==a})}function a(a){return a.replace(/::/g,
"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(a){return a in r?r[a]:r[a]=RegExp("(^|\\s)"+a+"(\\s|$)")}function e(a,e){return e===n?p(a):p(a).filter(e)}function l(a,e,c,f){return b(e)?e.call(a,c,f):e}function k(a,e,c){var f=a%2?e:e.parentNode;f?f.insertBefore(c,!a?e.nextSibling:1==a?f.firstChild:2==a?e:null):p(c).remove()}function o(a,e){e(a);for(var c in a.childNodes)o(a.childNodes[c],e)}var n,q,p,s,t=[],x=t.slice,u=
window.document,v={},r={},z=u.defaultView.getComputedStyle,C={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},L=/^\s*<(\w+|!)[^>]*>/,J=[1,3,8,9,11],Q=u.createElement("table"),B=u.createElement("tr"),D={tr:u.createElement("tbody"),tbody:Q,thead:Q,tfoot:Q,td:B,th:B,"*":u.createElement("div")},E=/complete|loaded|interactive/,A=/^\.([\w-]+)$/,N=/^#([\w-]+)$/,H=/^[\w-]+$/,K={}.toString,w={},F,M,I=u.createElement("div");w.matches=function(a,e){if(!a||1!==a.nodeType)return!1;
var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,e);var f;f=a.parentNode;(c=!f)&&(f=I).appendChild(a);f=~w.qsa(f,e).indexOf(a);c&&I.removeChild(a);return f};F=function(a){return a.replace(/-+(.)?/g,function(a,e){return e?e.toUpperCase():""})};M=function(a){return a.filter(function(e,c){return a.indexOf(e)==c})};w.fragment=function(a,e){e===n&&(e=L.test(a)&&RegExp.$1);e in D||(e="*");var c=D[e];c.innerHTML=""+a;return p.each(x.call(c.childNodes),
function(){c.removeChild(this)})};w.Z=function(a,e){a=a||[];a.__proto__=arguments.callee.prototype;a.selector=e||"";return a};w.isZ=function(a){return a instanceof w.Z};w.init=function(a,e){if(a){if(b(a))return p(u).ready(a);if(w.isZ(a))return a;var c;if(g(a))c=d(a);else if(j(a))c=[p.extend({},a)],a=null;else if(0<=J.indexOf(a.nodeType)||a===window)c=[a],a=null;else if(L.test(a))c=w.fragment(a.trim(),RegExp.$1),a=null;else{if(e!==n)return p(e).find(a);c=w.qsa(u,a)}return w.Z(c,a)}return w.Z()};p=
function(a,e){return w.init(a,e)};p.extend=function(a){x.call(arguments,1).forEach(function(e){for(q in e)e[q]!==n&&(a[q]=e[q])});return a};w.qsa=function(a,e){var c;return a===u&&N.test(e)?(c=a.getElementById(RegExp.$1))?[c]:t:1!==a.nodeType&&9!==a.nodeType?t:x.call(A.test(e)?a.getElementsByClassName(RegExp.$1):H.test(e)?a.getElementsByTagName(e):a.querySelectorAll(e))};p.isFunction=b;p.isObject=h;p.isArray=g;p.isPlainObject=j;p.inArray=function(a,e,c){return t.indexOf.call(e,a,c)};p.trim=function(a){return a.trim()};
p.uuid=0;p.map=function(a,e){var c,d=[],b;if(f(a))for(b=0;b<a.length;b++)c=e(a[b],b),null!=c&&d.push(c);else for(b in a)c=e(a[b],b),null!=c&&d.push(c);return 0<d.length?[].concat.apply([],d):d};p.each=function(a,e){var c;if(f(a))for(c=0;c<a.length&&!1!==e.call(a[c],c,a[c]);c++);else for(c in a)if(!1===e.call(a[c],c,a[c]))break;return a};p.fn={forEach:t.forEach,reduce:t.reduce,push:t.push,indexOf:t.indexOf,concat:t.concat,map:function(a){return p.map(this,function(e,c){return a.call(e,c,e)})},slice:function(){return p(x.apply(this,
arguments))},ready:function(a){E.test(u.readyState)?a(p):u.addEventListener("DOMContentLoaded",function(){a(p)},!1);return this},get:function(a){return a===n?x.call(this):this[a]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){this.forEach(function(e,c){a.call(e,c,e)});return this},filter:function(a){return p([].filter.call(this,function(e){return w.matches(e,
a)}))},add:function(a,e){return p(M(this.concat(p(a,e))))},is:function(a){return 0<this.length&&w.matches(this[0],a)},not:function(a){var e=[];if(b(a)&&a.call!==n)this.each(function(c){a.call(this,c)||e.push(this)});else{var c="string"==typeof a?this.filter(a):f(a)&&b(a.item)?x.call(a):p(a);this.forEach(function(a){0>c.indexOf(a)&&e.push(a)})}return p(e)},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!h(a)?a:p(a)},last:function(){var a=this[this.length-
1];return a&&!h(a)?a:p(a)},find:function(a){var e;e=1==this.length?w.qsa(this[0],a):this.map(function(){return w.qsa(this,a)});return p(e)},closest:function(a,e){for(var c=this[0];c&&!w.matches(c,a);)c=c!==e&&c!==u&&c.parentNode;return p(c)},parents:function(a){for(var c=[],f=this;0<f.length;)f=p.map(f,function(a){if((a=a.parentNode)&&a!==u&&0>c.indexOf(a))return c.push(a),a});return e(c,a)},parent:function(a){return e(M(this.pluck("parentNode")),a)},children:function(a){return e(this.map(function(){return x.call(this.children)}),
a)},siblings:function(a){return e(this.map(function(a,e){return x.call(e.parentNode.children).filter(function(a){return a!==e})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null);if("none"==z(this,"").getPropertyValue("display")){var a=this.style,e=this.nodeName,c,f;v[e]||(c=u.createElement(e),u.body.appendChild(c),f=
z(c,"").getPropertyValue("display"),c.parentNode.removeChild(c),"none"==f&&(f="block"),v[e]=f);a.display=v[e]}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return this.each(function(){p(this).wrapAll(p(a)[0].cloneNode(!1))})},wrapAll:function(a){this[0]&&(p(this[0]).before(a=p(a)),a.append(this));return this},unwrap:function(){this.parent().each(function(){p(this).replaceWith(p(this).children())});return this},clone:function(){return p(this.map(function(){return this.cloneNode(!0)}))},
hide:function(){return this.css("display","none")},toggle:function(a){return(a===n?"none"==this.css("display"):a)?this.show():this.hide()},prev:function(){return p(this.pluck("previousElementSibling"))},next:function(){return p(this.pluck("nextElementSibling"))},html:function(a){return a===n?0<this.length?this[0].innerHTML:null:this.each(function(e){var c=this.innerHTML;p(this).empty().append(l(this,a,e,c))})},text:function(a){return a===n?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=
a})},attr:function(a,e){var c;return"string"==typeof a&&e===n?0==this.length||1!==this[0].nodeType?n:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:this.each(function(c){if(1===this.nodeType)if(h(a))for(q in a)this.setAttribute(q,a[q]);else this.setAttribute(a,l(this,e,c,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,e){return e===n?this[0]?this[0][a]:
n:this.each(function(c){this[a]=l(this,e,c,this[a])})},data:function(e,c){var f=this.attr("data-"+a(e),c);return null!==f?f:n},val:function(a){return a===n?0<this.length?this[0].value:n:this.each(function(e){this.value=l(this,a,e,this.value)})},offset:function(){if(0==this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(e,c){if(c===n&&"string"==typeof e)return 0==this.length?n:
this[0].style[F(e)]||z(this[0],"").getPropertyValue(e);var f="";for(q in e)"string"==typeof e[q]&&""==e[q]?this.each(function(){this.style.removeProperty(a(q))}):f+=a(q)+":"+("number"==typeof e[q]&&!C[a(q)]?e[q]+"px":e[q])+";";"string"==typeof e&&(""==c?this.each(function(){this.style.removeProperty(a(e))}):f=a(e)+":"+("number"==typeof c&&!C[a(e)]?c+"px":c));return this.each(function(){this.style.cssText+=";"+f})},index:function(a){return a?this.indexOf(p(a)[0]):this.parent().children().indexOf(this[0])},
hasClass:function(a){return 1>this.length?!1:c(a).test(this[0].className)},addClass:function(a){return this.each(function(e){s=[];var c=this.className;l(this,a,e,c).split(/\s+/g).forEach(function(a){p(this).hasClass(a)||s.push(a)},this);s.length&&(this.className+=(c?" ":"")+s.join(" "))})},removeClass:function(a){return this.each(function(e){if(a===n)return this.className="";s=this.className;l(this,a,e,s).split(/\s+/g).forEach(function(a){s=s.replace(c(a)," ")});this.className=s.trim()})},toggleClass:function(a,
e){return this.each(function(c){c=l(this,a,c,this.className);(e===n?!p(this).hasClass(c):e)?p(this).addClass(c):p(this).removeClass(c)})}};["width","height"].forEach(function(a){p.fn[a]=function(e){var c,f=a.replace(/./,function(a){return a[0].toUpperCase()});return e===n?this[0]==window?window["inner"+f]:this[0]==u?u.documentElement["offset"+f]:(c=this.offset())&&c[a]:this.each(function(c){var f=p(this);f.css(a,l(this,e,c,f[a]()))})}});["after","prepend","before","append"].forEach(function(a,e){p.fn[a]=
function(){var a=p.map(arguments,function(a){return h(a)?a:w.fragment(a)});if(1>a.length)return this;var c=this.length,f=1<c,d=2>e;return this.each(function(b,l){for(var g=0;g<a.length;g++){var h=a[d?a.length-g-1:g];o(h,function(a){null!=a.nodeName&&("SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type))&&window.eval.call(window,a.innerHTML)});f&&b<c-1&&(h=h.cloneNode(!0));k(e,l,h)}})};p.fn[e%2?a+"To":"insert"+(e?"Before":"After")]=function(e){p(e)[a](this);return this}});w.Z.prototype=
p.fn;w.camelize=F;w.uniq=M;p.zepto=w;return p}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);
(function(b){function h(a){return a._zid||(a._zid=k++)}function j(a,e,c,f){e=g(e);if(e.ns)var d=RegExp("(?:^| )"+e.ns.replace(" "," .* ?")+"(?: |$)");return(l[h(a)]||[]).filter(function(a){return a&&(!e.e||a.e==e.e)&&(!e.ns||d.test(a.ns))&&(!c||h(a.fn)===h(c))&&(!f||a.sel==f)})}function g(a){a=(""+a).split(".");return{e:a[0],ns:a.slice(1).sort().join(" ")}}function f(a,e,c){b.isObject(a)?b.each(a,c):a.split(/\s/).forEach(function(a){c(a,e)})}function d(a,e,c,d,k,o){var o=!!o,j=h(a),C=l[j]||(l[j]=
[]);f(e,c,function(e,c){var f=k&&k(c,e),l=f||c,h=function(e){var c=l.apply(a,[e].concat(e.data));!1===c&&e.preventDefault();return c},f=b.extend(g(e),{fn:c,proxy:h,sel:d,del:f,i:C.length});C.push(f);a.addEventListener(f.e,h,o)})}function a(a,e,c,d){var b=h(a);f(e||"",c,function(e,c){j(a,e,c,d).forEach(function(e){delete l[b][e.i];a.removeEventListener(e.e,e.proxy,!1)})})}function c(a){var e=b.extend({originalEvent:a},a);b.each(p,function(c,f){e[c]=function(){this[f]=n;return a[c].apply(a,arguments)};
e[f]=q});return e}function e(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var e=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0;e.call(this)}}}var l={},k=1,o={};o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents";b.event={add:d,remove:a};b.proxy=function(a,e){if(b.isFunction(a)){var c=function(){return a.apply(e,arguments)};c._zid=h(a);return c}if("string"==typeof e)return b.proxy(a[e],a);throw new TypeError("expected function");};b.fn.bind=function(a,e){return this.each(function(){d(this,
a,e)})};b.fn.unbind=function(e,c){return this.each(function(){a(this,e,c)})};b.fn.one=function(e,c){return this.each(function(f,b){d(this,e,c,null,function(e,c){return function(){var f=e.apply(b,arguments);a(b,c,e);return f}})})};var n=function(){return!0},q=function(){return!1},p={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};b.fn.delegate=function(a,e,f){var l=!1;if("blur"==e||"focus"==e)b.iswebkit?e="blur"==
e?"focusout":"focus"==e?"focusin":e:l=!0;return this.each(function(k,g){d(g,e,f,a,function(e){return function(f){var d,l=b(f.target).closest(a,g).get(0);if(l)return d=b.extend(c(f),{currentTarget:l,liveFired:g}),e.apply(l,[d].concat([].slice.call(arguments,1)))}},l)})};b.fn.undelegate=function(e,c,f){return this.each(function(){a(this,c,f,e)})};b.fn.live=function(a,e){b(document.body).delegate(this.selector,a,e);return this};b.fn.die=function(a,e){b(document.body).undelegate(this.selector,a,e);return this};
b.fn.on=function(a,e,c){return void 0==e||b.isFunction(e)?this.bind(a,e):this.delegate(e,a,c)};b.fn.off=function(a,e,c){return void 0==e||b.isFunction(e)?this.unbind(a,e):this.undelegate(e,a,c)};b.fn.trigger=function(a,c){"string"==typeof a&&(a=b.Event(a));e(a);a.data=c;return this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(a)})};b.fn.triggerHandler=function(a,e){var f,d;this.each(function(l,k){f=c("string"==typeof a?b.Event(a):a);f.data=e;f.target=k;b.each(j(k,a.type||a),function(a,
e){d=e.proxy(f);if(f.isImmediatePropagationStopped())return!1})});return d};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(a){b.fn[a]=function(e){return this.bind(a,e)}});["focus","blur"].forEach(function(a){b.fn[a]=function(e){if(e)this.bind(a,e);else if(this.length)try{this.get(0)[a]()}catch(c){}return this}});b.Event=function(a,e){var c=document.createEvent(o[a]||"Events"),
f=!0;if(e)for(var d in e)"bubbles"==d?f=!!e[d]:c[d]=e[d];c.initEvent(a,f,!0,null,null,null,null,null,null,null,null,null,null,null,null);return c}})(Zepto);
(function(b){function h(b){var g=this.os={},f=this.browser={},d=b.match(/WebKit\/([\d.]+)/),a=b.match(/(Android)\s+([\d.]+)/),c=b.match(/(iPad).*OS\s([\d_]+)/),e=!c&&b.match(/(iPhone\sOS)\s([\d_]+)/),l=b.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),k=l&&b.match(/TouchPad/),h=b.match(/Kindle\/([\d.]+)/),n=b.match(/Silk\/([\d._]+)/),q=b.match(/(BlackBerry).*Version\/([\d.]+)/);if(f.webkit=!!d)f.version=d[1];a&&(g.android=!0,g.version=a[2]);e&&(g.ios=g.iphone=!0,g.version=e[2].replace(/_/g,"."));c&&(g.ios=g.ipad=
!0,g.version=c[2].replace(/_/g,"."));l&&(g.webos=!0,g.version=l[2]);k&&(g.touchpad=!0);q&&(g.blackberry=!0,g.version=q[2]);h&&(g.kindle=!0,g.version=h[1]);n&&(f.silk=!0,f.version=n[1]);!n&&(g.android&&b.match(/Kindle Fire/))&&(f.silk=!0)}h.call(b,navigator.userAgent);b.__detect=h})(Zepto);
(function(b,h){var j="",g,f=window.document.createElement("div"),d=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,a={};b.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(a,e){if(f.style[a+"TransitionProperty"]!==h)return j="-"+a.toLowerCase()+"-",g=e,!1});a[j+"transition-property"]=a[j+"transition-duration"]=a[j+"transition-timing-function"]=a[j+"animation-name"]=a[j+"animation-duration"]="";b.fx={off:g===h&&f.style.transitionProperty===h,cssPrefix:j,transitionEnd:g?
g+"TransitionEnd":"transitionend",animationEnd:g?g+"AnimationEnd":"animationend"};b.fn.animate=function(a,e,f,d){b.isObject(e)&&(f=e.easing,d=e.complete,e=e.duration);e&&(e/=1E3);return this.anim(a,e,f,d)};b.fn.anim=function(c,e,f,k){var g,n={},q,p=this,s,t=b.fx.transitionEnd;e===h&&(e=0.4);b.fx.off&&(e=0);if("string"==typeof c)n[j+"animation-name"]=c,n[j+"animation-duration"]=e+"s",t=b.fx.animationEnd;else{for(q in c)d.test(q)?(g||(g=[]),g.push(q+"("+c[q]+")")):n[q]=c[q];g&&(n[j+"transform"]=g.join(" "));
!b.fx.off&&"object"===typeof c&&(n[j+"transition-property"]=Object.keys(c).join(", "),n[j+"transition-duration"]=e+"s",n[j+"transition-timing-function"]=f||"linear")}s=function(e){if("undefined"!==typeof e){if(e.target!==e.currentTarget)return;b(e.target).unbind(t,arguments.callee)}b(this).css(a);k&&k.call(this)};0<e&&this.bind(t,s);setTimeout(function(){p.css(n);0>=e&&setTimeout(function(){p.each(function(){s.call(this)})},0)},0);return this};f=null})(Zepto);
(function(b){function h(a,e,c,f){if(a.global)return a=e||q,c=b.Event(c),b(a).trigger(c,f),!c.defaultPrevented}function j(a){a.global&&0===b.active++&&h(a,null,"ajaxStart")}function g(a,e){var c=e.context;if(!1===e.beforeSend.call(c,a,e)||!1===h(e,c,"ajaxBeforeSend",[a,e]))return!1;h(e,c,"ajaxSend",[a,e])}function f(e,c,f){var d=f.context;f.success.call(d,e,"success",c);h(f,d,"ajaxSuccess",[c,f,e]);a("success",c,f)}function d(e,c,f,d){var b=d.context;d.error.call(b,f,c,e);h(d,b,"ajaxError",[f,d,e]);
a(c,f,d)}function a(a,e,c){var f=c.context;c.complete.call(f,e,a);h(c,f,"ajaxComplete",[e,c]);c.global&&!--b.active&&h(c,null,"ajaxStop")}function c(){}function e(a){return a&&(a==r?"html":a==v?"json":x.test(a)?"script":u.test(a)&&"xml")||"text"}function l(a){n(a.data)&&(a.data=b.param(a.data));if(a.data&&(!a.type||"GET"==a.type.toUpperCase()))a.url=(a.url+"&"+a.data).replace(/[&?]{1,2}/,"?")}function k(a,e,c,f){var d=b.isArray(e);b.each(e,function(e,l){f&&(e=c?f:f+"["+(d?"":e)+"]");!f&&d?a.add(l.name,
l.value):(c?b.isArray(l):n(l))?k(a,l,c,e):a.add(e,l)})}var o=0,n=b.isObject,q=window.document,p,s,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,u=/^(?:text|application)\/xml/i,v="application/json",r="text/html",z=/^\s*$/;b.active=0;b.ajaxJSONP=function(e){var d="jsonp"+ ++o,k=q.createElement("script"),g={abort:function(){b(k).remove();d in window&&(window[d]=c);a("abort",g,e)}},h;e.error&&(k.onerror=function(){g.abort();e.error()});window[d]=function(a){clearTimeout(h);
b(k).remove();delete window[d];f(a,g,e)};l(e);k.src=e.url.replace(/=\?/,"="+d);b("head").append(k);0<e.timeout&&(h=setTimeout(function(){g.abort();a("timeout",g,e)},e.timeout));return g};b.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:v,xml:"application/xml, text/xml",html:r,text:"text/plain"},crossDomain:!1,timeout:0};b.ajax=function(a){var k=
b.extend({},a||{});for(p in b.ajaxSettings)void 0===k[p]&&(k[p]=b.ajaxSettings[p]);j(k);k.crossDomain||(k.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(k.url)&&RegExp.$2!=window.location.host);var h=k.dataType,a=/=\?/.test(k.url);if("jsonp"==h||a)return a||(k.url=(k.url+"&callback=?").replace(/[&?]{1,2}/,"?")),b.ajaxJSONP(k);k.url||(k.url=window.location.toString());l(k);var a=k.accepts[h],o={},C=/^([\w-]+:)\/\//.test(k.url)?RegExp.$1:window.location.protocol,n=b.ajaxSettings.xhr(),q;k.crossDomain||
(o["X-Requested-With"]="XMLHttpRequest");a&&(o.Accept=a,-1<a.indexOf(",")&&(a=a.split(",",2)[0]),n.overrideMimeType&&n.overrideMimeType(a));if(k.contentType||k.data&&"GET"!=k.type.toUpperCase())o["Content-Type"]=k.contentType||"application/x-www-form-urlencoded";k.headers=b.extend(o,k.headers||{});n.onreadystatechange=function(){if(n.readyState==4){clearTimeout(q);var a,c=false;if(n.status>=200&&n.status<300||n.status==304||n.status==0&&C=="file:"){h=h||e(n.getResponseHeader("content-type"));a=n.responseText;
try{h=="script"?(0,eval)(a):h=="xml"?a=n.responseXML:h=="json"&&(a=z.test(a)?null:JSON.parse(a))}catch(b){c=b}c?d(c,"parsererror",n,k):f(a,n,k)}else d(null,"error",n,k)}};n.open(k.type,k.url,"async"in k?k.async:!0);for(s in k.headers)n.setRequestHeader(s,k.headers[s]);if(!1===g(n,k))return n.abort(),!1;0<k.timeout&&(q=setTimeout(function(){n.onreadystatechange=c;n.abort();d(null,"timeout",n,k)},k.timeout));n.send(k.data?k.data:null);return n};b.get=function(a,e){return b.ajax({url:a,success:e})};
b.post=function(a,e,c,f){b.isFunction(e)&&(f=f||c,c=e,e=null);return b.ajax({type:"POST",url:a,data:e,success:c,dataType:f})};b.getJSON=function(a,e){return b.ajax({url:a,success:e,dataType:"json"})};b.fn.load=function(a,e){if(!this.length)return this;var c=this,f=a.split(/\s/),d;1<f.length&&(a=f[0],d=f[1]);b.get(a,function(a){c.html(d?b(q.createElement("div")).html(a.replace(t,"")).find(d).html():a);e&&e.call(c)});return this};var C=encodeURIComponent;b.param=function(a,e){var c=[];c.add=function(a,
e){this.push(C(a)+"="+C(e))};k(c,a,e);return c.join("&").replace("%20","+")}})(Zepto);
(function(b){b.fn.serializeArray=function(){var h=[],j;b(Array.prototype.slice.call(this.get(0).elements)).each(function(){j=b(this);var g=j.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&(!this.disabled&&"submit"!=g&&"reset"!=g&&"button"!=g&&("radio"!=g&&"checkbox"!=g||this.checked))&&h.push({name:j.attr("name"),value:j.val()})});return h};b.fn.serialize=function(){var b=[];this.serializeArray().forEach(function(j){b.push(encodeURIComponent(j.name)+"="+encodeURIComponent(j.value))});return b.join("&")};
b.fn.submit=function(h){h?this.bind("submit",h):this.length&&(h=b.Event("submit"),this.eq(0).trigger(h),h.defaultPrevented||this.get(0).submit());return this}})(Zepto);
(function(b){function h(a,c,e,f){var d=Math.abs(a-c),b=Math.abs(e-f);return d>=b?0<a-c?"Left":"Right":0<e-f?"Up":"Down"}function j(){d=null;g.last&&(g.el.trigger("longTap"),g={})}var g={},f,d;b(document).ready(function(){var a,c;b(document.body).bind("touchstart",function(e){a=Date.now();c=a-(g.last||a);g.el=b("tagName"in e.touches[0].target?e.touches[0].target:e.touches[0].target.parentNode);f&&clearTimeout(f);g.x1=e.touches[0].pageX;g.y1=e.touches[0].pageY;0<c&&250>=c&&(g.isDoubleTap=!0);g.last=
a;d=setTimeout(j,750)}).bind("touchmove",function(a){d&&clearTimeout(d);d=null;g.x2=a.touches[0].pageX;g.y2=a.touches[0].pageY}).bind("touchend",function(){d&&clearTimeout(d);d=null;g.isDoubleTap?(g.el.trigger("doubleTap"),g={}):g.x2&&30<Math.abs(g.x1-g.x2)||g.y2&&30<Math.abs(g.y1-g.y2)?(g.el.trigger("swipe")&&g.el.trigger("swipe"+h(g.x1,g.x2,g.y1,g.y2)),g={}):"last"in g&&(g.el.trigger("tap"),f=setTimeout(function(){f=null;g.el.trigger("singleTap");g={}},250))}).bind("touchcancel",function(){f&&clearTimeout(f);
d&&clearTimeout(d);d=f=null;g={}})});"swipe swipeLeft swipeRight swipeUp swipeDown doubleTap tap singleTap longTap".split(" ").forEach(function(a){b.fn[a]=function(c){return this.bind(a,c)}})})(Zepto);var dust={};function getGlobal(){return function(){return this.dust}.call(null)}
(function(b){function h(a,e,c){this.stack=a;this.global=e;this.blocks=c}function j(a,e,c,f){this.tail=e;this.isObject=!b.isArray(a)&&a&&"object"===typeof a;this.head=a;this.index=c;this.of=f}function g(a){this.head=new d(this);this.callback=a;this.out=""}function f(){this.head=new d(this)}function d(a,e,c){this.root=a;this.next=e;this.data="";this.flushable=!1;this.taps=c}function a(a,e){this.head=a;this.tail=e}b.cache={};b.register=function(a,e){a&&(b.cache[a]=e)};b.render=function(a,e,c){c=(new g(c)).head;
b.load(a,c,h.wrap(e)).end()};b.stream=function(a,e){var c=new f;b.nextTick(function(){b.load(a,c.head,h.wrap(e)).end()});return c};b.renderSource=function(a,e,c){return b.compileFn(a)(e,c)};b.compileFn=function(a,e){var c=b.loadSource(b.compile(a,e));return function(a,e){var d=e?new g(e):new f;b.nextTick(function(){c(d.head,h.wrap(a)).end()});return d}};b.load=function(a,e,c){var f=b.cache[a];return f?f(e,c):b.onLoad?e.map(function(e){b.onLoad(a,function(f,d){if(f)return e.setError(f);b.cache[a]||
b.loadSource(b.compile(d,a));b.cache[a](e,c).end()})}):e.setError(Error("Template Not Found: "+a))};b.loadSource=function(a){return eval(a)};b.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)};b.nextTick=function(){return"undefined"!==typeof process?process.nextTick:function(a){setTimeout(a,0)}}();b.isEmpty=function(a){return b.isArray(a)&&!a.length?!0:0===a?!1:!a};b.filter=function(a,e,c){if(c)for(var f=0,d=c.length;f<d;f++){var l=c[f];"s"===
l?e=null:"function"===typeof b.filters[l]&&(a=b.filters[l](a))}e&&(a=b.filters[e](a));return a};b.filters={h:function(a){return b.escapeHtml(a)},j:function(a){return b.escapeJs(a)},u:encodeURI,uc:encodeURIComponent,js:function(a){return!JSON?a:JSON.stringify(a)},jp:function(a){return!JSON?a:JSON.parse(a)}};b.makeBase=function(a){return new h(new j,a)};h.wrap=function(a){return a instanceof h?a:new h(new j(a))};h.prototype.get=function(a){for(var e=this.stack,c;e;){if(e.isObject&&(c=e.head[a],void 0!==
c))return c;e=e.tail}return this.global?this.global[a]:void 0};h.prototype.getPath=function(a,e){var c=this.stack,f=e.length;if(a&&0===f)return c.head;for(var c=c.head,d=0;c&&d<f;)c=c[e[d]],d++;return c};h.prototype.push=function(a,e,c){return new h(new j(a,this.stack,e,c),this.global,this.blocks)};h.prototype.rebase=function(a){return new h(new j(a),this.global,this.blocks)};h.prototype.current=function(){return this.stack.head};h.prototype.getBlock=function(a,e,c){"function"===typeof a&&(a=a(e,
c).data,e.data="");if(e=this.blocks)for(var c=e.length,f;c--;)if(f=e[c][a])return f};h.prototype.shiftBlocks=function(a){var e=this.blocks;return a?(a=e?e.concat([a]):[a],new h(this.stack,this.global,a)):this};g.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.out+=a.data;else{a.error&&(this.callback(a.error),this.flush=function(){});return}this.head=a=a.next}this.callback(null,this.out)};f.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.emit("data",a.data);
else{a.error&&(this.emit("error",a.error),this.flush=function(){});return}this.head=a=a.next}this.emit("end")};f.prototype.emit=function(a,e){if(!this.events)return!1;var c=this.events[a];if(!c)return!1;if("function"==typeof c)c(e);else for(var c=c.slice(0),f=0,d=c.length;f<d;f++)c[f](e)};f.prototype.on=function(a,e){this.events||(this.events={});this.events[a]?"function"===typeof this.events[a]?this.events[a]=[this.events[a],e]:this.events[a].push(e):this.events[a]=e;return this};f.prototype.pipe=
function(a){this.on("data",function(e){a.write(e,"utf8")}).on("end",function(){a.end()}).on("error",function(e){a.error(e)});return this};d.prototype.write=function(a){var e=this.taps;e&&(a=e.go(a));this.data+=a;return this};d.prototype.end=function(a){a&&this.write(a);this.flushable=!0;this.root.flush();return this};d.prototype.map=function(a){var e=new d(this.root,this.next,this.taps),c=new d(this.root,e,this.taps);this.next=c;this.flushable=!0;a(c);return e};d.prototype.tap=function(e){var c=this.taps;
this.taps=c?c.push(e):new a(e);return this};d.prototype.untap=function(){this.taps=this.taps.tail;return this};d.prototype.render=function(a,e){return a(this,e)};d.prototype.reference=function(a,e,c,f){return"function"===typeof a&&(a.isFunction=!0,a=a.apply(e.current(),[this,e,null,{auto:c,filters:f}]),a instanceof d)?a:b.isEmpty(a)?this:this.write(b.filter(a,c,f))};d.prototype.section=function(a,e,c,f){if("function"===typeof a&&(a=a.apply(e.current(),[this,e,c,f]),a instanceof d))return a;var l=
c.block,c=c["else"];f&&(e=e.push(f));if(b.isArray(a)){if(l){var f=a.length,k=this;if(0<f){e.stack.head&&(e.stack.head.$len=f);for(c=0;c<f;c++)e.stack.head&&(e.stack.head.$idx=c),k=l(k,e.push(a[c],c,f));e.stack.head&&(e.stack.head.$idx=void 0,e.stack.head.$len=void 0);return k}if(c)return c(this,e)}}else if(!0===a){if(l)return l(this,e)}else if(a||0===a){if(l)return e.stack.head&&"object"===typeof a&&(e.stack.head.$idx=0,e.stack.head.$len=1),k=l(this,e.push(a)),e.stack.head&&"object"===typeof a&&(e.stack.head.$idx=
void 0,e.stack.head.$len=void 0),k}else if(c)return c(this,e);return this};d.prototype.exists=function(a,e,c){var f=c.block,c=c["else"];if(b.isEmpty(a)){if(c)return c(this,e)}else if(f)return f(this,e);return this};d.prototype.notexists=function(a,e,c){var f=c.block,c=c["else"];if(b.isEmpty(a)){if(f)return f(this,e)}else if(c)return c(this,e);return this};d.prototype.block=function(a,e,c){c=c.block;a&&(c=a);return c?c(this,e):this};d.prototype.partial=function(a,e,c){var f;c?(f=b.makeBase(e.global),
f.blocks=e.blocks,e.stack&&e.stack.tail&&(f.stack=e.stack.tail),f=f.push(c),f=f.push(e.stack.head)):f=e;return"function"===typeof a?this.capture(a,f,function(a,e){b.load(a,e,f).end()}):b.load(a,this,f)};d.prototype.helper=function(a,e,c,f){if(b.helpers[a])return b.helpers[a](this,e,c,f)};d.prototype.capture=function(a,e,c){return this.map(function(f){var d=new g(function(a,e){a?f.setError(a):c(e,f)});a(d.head,e).end()})};d.prototype.setError=function(a){this.error=a;this.root.flush();return this};
a.prototype.push=function(e){return new a(e,this)};a.prototype.go=function(a){for(var e=this;e;)a=e.head(a),e=e.tail;return a};var c=RegExp(/[&<>\"\']/),e=/&/g,l=/</g,k=/>/g,o=/\"/g,n=/\'/g;b.escapeHtml=function(a){return"string"===typeof a?!c.test(a)?a:a.replace(e,"&amp;").replace(l,"&lt;").replace(k,"&gt;").replace(o,"&quot;").replace(n,"&#39;"):a};var q=/\\/g,p=/\r/g,s=/\u2028/g,t=/\u2029/g,x=/\n/g,u=/\f/g,v=/'/g,r=/"/g,z=/\t/g;b.escapeJs=function(a){return"string"===typeof a?a.replace(q,"\\\\").replace(r,
'\\"').replace(v,"\\'").replace(p,"\\r").replace(s,"\\u2028").replace(t,"\\u2029").replace(x,"\\n").replace(u,"\\f").replace(z,"\\t"):a}})(dust);"undefined"!==typeof exports&&("undefined"!==typeof process&&require("./server")(dust),module.exports=dust);
(function(b){function h(a,c){for(var f=[c[0]],d=1,g=c.length;d<g;d++){var h=b.filterNode(a,c[d]);h&&f.push(h)}return f}function j(a,c){return c}function g(){}function f(a,c){for(var f="",d=1,g=c.length;d<g;d++)f=f+b.compileNode(a,c[d]);return f}function d(a,c,f){return"."+f+"("+b.compileNode(a,c[1])+","+b.compileNode(a,c[2])+","+b.compileNode(a,c[4])+","+b.compileNode(a,c[3])+")"}b.compile=function(a,c){try{var f,d=b.parse(a);f=b.filterNode({},d);var d={name:c,bodies:[],blocks:{},index:0,auto:"h"},
g="(function(){dust.register("+(c?'"'+c+'"':"null")+","+b.compileNode(d,f)+");",h;f=[];var j=d.blocks,s;for(s in j)f.push("'"+s+"':"+j[s]);if(f.length){d.blocks="ctx=ctx.shiftBlocks(blocks);";h="var blocks={"+f.join(",")+"};"}else h=d.blocks="";var g=g+h,t;h=[];for(var x=d.bodies,u=d.blocks,d=0,v=x.length;d<v;d++)h[d]="function body_"+d+"(chk,ctx){"+u+"return chk"+x[d]+";}";t=h.join("");return g+t+"return body_0;})();"}catch(r){if(!r.line||!r.column)throw r;throw new SyntaxError(r.message+" At line : "+
r.line+", column : "+r.column);}};b.filterNode=function(a,c){return b.optimizers[c[0]](a,c)};b.optimizers={body:function(a,c){for(var f=[c[0]],d,g=1,h=c.length;g<h;g++){var j=b.filterNode(a,c[g]);if(j)if(j[0]==="buffer")if(d)d[1]=d[1]+j[1];else{d=j;f.push(j)}else{d=null;f.push(j)}}return f},buffer:j,special:function(e,c){return["buffer",a[c[1]]]},format:g,reference:h,"#":h,"?":h,"^":h,"<":h,"+":h,"@":h,"%":h,partial:h,context:h,params:h,bodies:h,param:h,filters:j,key:j,path:j,literal:j,comment:g};
b.pragmas={esc:function(a,c,d){var b=a.auto;c||(c="h");a.auto=c==="s"?"":c;c=f(a,d.block);a.auto=b;return c}};var a={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};b.compileNode=function(a,c){return b.nodes[c[0]](a,c)};b.nodes={body:function(a,c){var d=a.index++,b="body_"+d;a.bodies[d]=f(a,c);return b},buffer:function(a,f){return".write("+c(f[1])+")"},format:function(a,f){return".write("+c(f[1]+f[2])+")"},reference:function(a,c){return".reference("+b.compileNode(a,c[1])+",ctx,"+b.compileNode(a,c[2])+")"},"#":function(a,
c){return d(a,c,"section")},"?":function(a,c){return d(a,c,"exists")},"^":function(a,c){return d(a,c,"notexists")},"<":function(a,c){for(var f=c[4],d=1,g=f.length;d<g;d++){var h=f[d];if(h[1][1]==="block"){a.blocks[c[1].text]=b.compileNode(a,h[2]);break}}return""},"+":function(a,f){return typeof f[1].text==="undefined"&&typeof f[4]==="undefined"?".block(ctx.getBlock("+b.compileNode(a,f[1])+",chk, ctx),"+b.compileNode(a,f[2])+", {},"+b.compileNode(a,f[3])+")":".block(ctx.getBlock("+c(f[1].text)+"),"+
b.compileNode(a,f[2])+","+b.compileNode(a,f[4])+","+b.compileNode(a,f[3])+")"},"@":function(a,f){return".helper("+c(f[1].text)+","+b.compileNode(a,f[2])+","+b.compileNode(a,f[4])+","+b.compileNode(a,f[3])+")"},"%":function(a,c){var f=c[1][1];if(!b.pragmas[f])return"";for(var d=c[4],g={},h=1,j=d.length;h<j;h++){var s=d[h];g[s[1][1]]=s[2]}d=c[3];s={};h=1;for(j=d.length;h<j;h++){var t=d[h];s[t[1][1]]=t[2][1]}return b.pragmas[f](a,c[2][1]?c[2][1].text:null,g,s)},partial:function(a,c){return".partial("+
b.compileNode(a,c[1])+","+b.compileNode(a,c[2])+","+b.compileNode(a,c[3])+")"},context:function(a,c){return c[1]?"ctx.rebase("+b.compileNode(a,c[1])+")":"ctx"},params:function(a,c){for(var f=[],d=1,g=c.length;d<g;d++)f.push(b.compileNode(a,c[d]));return f.length?"{"+f.join(",")+"}":"null"},bodies:function(a,c){for(var f=[],d=1,g=c.length;d<g;d++)f.push(b.compileNode(a,c[d]));return"{"+f.join(",")+"}"},param:function(a,c){return b.compileNode(a,c[1])+":"+b.compileNode(a,c[2])},filters:function(a,c){for(var f=
[],d=1,b=c.length;d<b;d++)f.push('"'+c[d]+'"');return'"'+a.auto+'"'+(f.length?",["+f.join(",")+"]":"")},key:function(a,c){return'ctx.get("'+c[1]+'")'},path:function(a,c){for(var f=c[1],d=c[2],b=[],g=0,h=d.length;g<h;g++)b.push('"'+d[g]+'"');return"ctx.getPath("+f+",["+b.join(",")+"])"},literal:function(a,f){return c(f[1])}};var c=typeof JSON==="undefined"?function(a){return'"'+b.escapeJs(a)+'"'}:JSON.stringify})("undefined"!==typeof exports?exports:getGlobal());
(function(b){var h=function(){function b(f){return'"'+f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var g={parse:function(f,d){function a(a){var c={},e;for(e in a)c[e]=a[e];return c}function c(a,c){for(var e=a.offset+c,d=a.offset;d<e;d++){var b=f.charAt(d);if(b==="\n"){a.seenCR||a.line++;a.column=1;a.seenCR=false}else if(b==="\r"||b===
"\u2028"||b==="\u2029"){a.line++;a.column=1;a.seenCR=true}else{a.column++;a.seenCR=false}}a.offset=a.offset+c}function e(c){if(!(i.offset<R.offset)){if(i.offset>R.offset){R=a(i);S=[]}S.push(c)}}function g(){var c,e,f;f=a(i);c=[];for(e=k();e!==null;){c.push(e);e=k()}c!==null&&(c=["body"].concat(c));c===null&&(i=a(f));return c}function k(){var a;a=F();if(a===null){a=o();if(a===null){a=u();if(a===null){a=r();if(a===null){a=x();a===null&&(a=H())}}}}return a}function o(){var d,b,k,h,j,o,v,r,u;m++;r=a(i);
u=a(i);d=n();if(d!==null){b=[];for(k=y();k!==null;){b.push(k);k=y()}if(b!==null){k=G();if(k!==null){h=g();if(h!==null){j=t();if(j!==null){o=q();if(o!==null){v=d[1].text===o.text?"":null;if(v!==null)d=[d,b,k,h,j,o,v];else{d=null;i=a(u)}}else{d=null;i=a(u)}}else{d=null;i=a(u)}}else{d=null;i=a(u)}}else{d=null;i=a(u)}}else{d=null;i=a(u)}}else{d=null;i=a(u)}d!==null&&(d=function(a,c,e,f,d,b){b.push(["param",["literal","block"],d]);f.push(b);return f}(r.offset,r.line,r.column,d[0],d[3],d[4],d[5]));d===
null&&(i=a(r));if(d===null){r=a(i);u=a(i);d=n();if(d!==null){b=[];for(k=y();k!==null;){b.push(k);k=y()}if(b!==null){if(f.charCodeAt(i.offset)===47){k="/";c(i,1)}else{k=null;m===0&&e('"/"')}if(k!==null){h=G();if(h!==null)d=[d,b,k,h];else{d=null;i=a(u)}}else{d=null;i=a(u)}}else{d=null;i=a(u)}}else{d=null;i=a(u)}d!==null&&(d=function(a,c,e,f){f.push(["bodies"]);return f}(r.offset,r.line,r.column,d[0]));d===null&&(i=a(r))}m--;m===0&&d===null&&e("section");return d}function n(){var d,b,g,k,l,h,j,o;j=a(i);
o=a(i);d=I();if(d!==null){if(/^[#?^<+@%]/.test(f.charAt(i.offset))){b=f.charAt(i.offset);c(i,1)}else{b=null;m===0&&e("[#?^<+@%]")}if(b!==null){g=[];for(k=y();k!==null;){g.push(k);k=y()}if(g!==null){k=z();if(k!==null){l=p();if(l!==null){h=s();if(h!==null)d=[d,b,g,k,l,h];else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}d!==null&&(d=[d[1],d[3],d[4],d[5]]);d===null&&(i=a(j));return d}function q(){var d,b,g,k,l,h,j,o;m++;j=a(i);o=a(i);
d=I();if(d!==null){if(f.charCodeAt(i.offset)===47){b="/";c(i,1)}else{b=null;m===0&&e('"/"')}if(b!==null){g=[];for(k=y();k!==null;){g.push(k);k=y()}if(g!==null){k=z();if(k!==null){l=[];for(h=y();h!==null;){l.push(h);h=y()}if(l!==null){h=G();if(h!==null)d=[d,b,g,k,l,h];else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}d!==null&&(d=d[3]);d===null&&(i=a(j));m--;m===0&&d===null&&e("end tag");return d}function p(){var d,b,g,k,l;g=a(i);
k=a(i);l=a(i);if(f.charCodeAt(i.offset)===58){d=":";c(i,1)}else{d=null;m===0&&e('":"')}if(d!==null){b=z();if(b!==null)d=[d,b];else{d=null;i=a(l)}}else{d=null;i=a(l)}d!==null&&(d=d[1]);d===null&&(i=a(k));d=d!==null?d:"";d!==null&&(d=d?["context",d]:["context"]);d===null&&(i=a(g));return d}function s(){var d,b,g,k,l,h,j,o;m++;h=a(i);d=[];j=a(i);o=a(i);g=y();if(g!==null)for(b=[];g!==null;){b.push(g);g=y()}else b=null;if(b!==null){g=B();if(g!==null){if(f.charCodeAt(i.offset)===61){k="=";c(i,1)}else{k=
null;m===0&&e('"="')}if(k!==null){l=C();if(l===null){l=z();l===null&&(l=A())}if(l!==null)b=[b,g,k,l];else{b=null;i=a(o)}}else{b=null;i=a(o)}}else{b=null;i=a(o)}}else{b=null;i=a(o)}b!==null&&(b=["param",["literal",b[1]],b[3]]);for(b===null&&(i=a(j));b!==null;){d.push(b);j=a(i);o=a(i);g=y();if(g!==null)for(b=[];g!==null;){b.push(g);g=y()}else b=null;if(b!==null){g=B();if(g!==null){if(f.charCodeAt(i.offset)===61){k="=";c(i,1)}else{k=null;m===0&&e('"="')}if(k!==null){l=C();if(l===null){l=z();l===null&&
(l=A())}if(l!==null)b=[b,g,k,l];else{b=null;i=a(o)}}else{b=null;i=a(o)}}else{b=null;i=a(o)}}else{b=null;i=a(o)}b!==null&&(b=["param",["literal",b[1]],b[3]]);b===null&&(i=a(j))}d!==null&&(d=["params"].concat(d));d===null&&(i=a(h));m--;m===0&&d===null&&e("params");return d}function t(){var d,b,k,h,j,o,n,v,r;m++;n=a(i);d=[];v=a(i);r=a(i);b=I();if(b!==null){if(f.charCodeAt(i.offset)===58){k=":";c(i,1)}else{k=null;m===0&&e('":"')}if(k!==null){h=B();if(h!==null){j=G();if(j!==null){o=g();if(o!==null)b=[b,
k,h,j,o];else{b=null;i=a(r)}}else{b=null;i=a(r)}}else{b=null;i=a(r)}}else{b=null;i=a(r)}}else{b=null;i=a(r)}b!==null&&(b=["param",["literal",b[2]],b[4]]);for(b===null&&(i=a(v));b!==null;){d.push(b);v=a(i);r=a(i);b=I();if(b!==null){if(f.charCodeAt(i.offset)===58){k=":";c(i,1)}else{k=null;m===0&&e('":"')}if(k!==null){h=B();if(h!==null){j=G();if(j!==null){o=g();if(o!==null)b=[b,k,h,j,o];else{b=null;i=a(r)}}else{b=null;i=a(r)}}else{b=null;i=a(r)}}else{b=null;i=a(r)}}else{b=null;i=a(r)}b!==null&&(b=["param",
["literal",b[2]],b[4]]);b===null&&(i=a(v))}d!==null&&(d=["bodies"].concat(d));d===null&&(i=a(n));m--;m===0&&d===null&&e("bodies");return d}function x(){var c,f,d,b,k,g;m++;k=a(i);g=a(i);c=I();if(c!==null){f=z();if(f!==null){d=v();if(d!==null){b=G();if(b!==null)c=[c,f,d,b];else{c=null;i=a(g)}}else{c=null;i=a(g)}}else{c=null;i=a(g)}}else{c=null;i=a(g)}c!==null&&(c=["reference",c[1],c[2]]);c===null&&(i=a(k));m--;m===0&&c===null&&e("reference");return c}function u(){var d,b,g,k,l,h,j,o,n,r;m++;n=a(i);
r=a(i);d=I();if(d!==null){if(f.charCodeAt(i.offset)===62){b=">";c(i,1)}else{b=null;m===0&&e('">"')}if(b===null)if(f.charCodeAt(i.offset)===43){b="+";c(i,1)}else{b=null;m===0&&e('"+"')}if(b!==null){k=a(i);g=B();g!==null&&(g=["literal",g]);g===null&&(i=a(k));g===null&&(g=A());if(g!==null){k=p();if(k!==null){l=s();if(l!==null){h=[];for(j=y();j!==null;){h.push(j);j=y()}if(h!==null){if(f.charCodeAt(i.offset)===47){j="/";c(i,1)}else{j=null;m===0&&e('"/"')}if(j!==null){o=G();if(o!==null)d=[d,b,g,k,l,h,j,
o];else{d=null;i=a(r)}}else{d=null;i=a(r)}}else{d=null;i=a(r)}}else{d=null;i=a(r)}}else{d=null;i=a(r)}}else{d=null;i=a(r)}}else{d=null;i=a(r)}}else{d=null;i=a(r)}d!==null&&(d=[d[1]===">"?"partial":d[1],d[2],d[3],d[4]]);d===null&&(i=a(n));m--;m===0&&d===null&&e("partial");return d}function v(){var d,b,g,k,l,h;m++;k=a(i);d=[];l=a(i);h=a(i);if(f.charCodeAt(i.offset)===124){b="|";c(i,1)}else{b=null;m===0&&e('"|"')}if(b!==null){g=B();if(g!==null)b=[b,g];else{b=null;i=a(h)}}else{b=null;i=a(h)}b!==null&&
(b=b[1]);for(b===null&&(i=a(l));b!==null;){d.push(b);l=a(i);h=a(i);if(f.charCodeAt(i.offset)===124){b="|";c(i,1)}else{b=null;m===0&&e('"|"')}if(b!==null){g=B();if(g!==null)b=[b,g];else{b=null;i=a(h)}}else{b=null;i=a(h)}b!==null&&(b=b[1]);b===null&&(i=a(l))}d!==null&&(d=["filters"].concat(d));d===null&&(i=a(k));m--;m===0&&d===null&&e("filters");return d}function r(){var d,b,g,k,l,h;m++;l=a(i);h=a(i);d=I();if(d!==null){if(f.charCodeAt(i.offset)===126){b="~";c(i,1)}else{b=null;m===0&&e('"~"')}if(b!==
null){g=B();if(g!==null){k=G();if(k!==null)d=[d,b,g,k];else{d=null;i=a(h)}}else{d=null;i=a(h)}}else{d=null;i=a(h)}}else{d=null;i=a(h)}d!==null&&(d=["special",d[2]]);d===null&&(i=a(l));m--;m===0&&d===null&&e("special");return d}function z(){var c,f;m++;f=a(i);c=Q();c!==null&&(c=function(a,c,e,f){a=["path"].concat(f);a.text=f[1].join(".");return a}(f.offset,f.line,f.column,c));c===null&&(i=a(f));if(c===null){f=a(i);c=B();c!==null&&(c=function(a,c,e,f){a=["key",f];a.text=f;return a}(f.offset,f.line,
f.column,c));c===null&&(i=a(f))}m--;m===0&&c===null&&e("identifier");return c}function C(){var c,f;m++;f=a(i);c=L();c===null&&(c=J());c!==null&&(c=["literal",c]);c===null&&(i=a(f));m--;m===0&&c===null&&e("number");return c}function L(){var d,b,g,k,l,h;m++;l=a(i);h=a(i);d=J();if(d!==null){if(f.charCodeAt(i.offset)===46){b=".";c(i,1)}else{b=null;m===0&&e('"."')}if(b!==null){k=J();if(k!==null)for(g=[];k!==null;){g.push(k);k=J()}else g=null;if(g!==null)d=[d,b,g];else{d=null;i=a(h)}}else{d=null;i=a(h)}}else{d=
null;i=a(h)}d!==null&&(d=parseFloat(d[0]+"."+d[2].join("")));d===null&&(i=a(l));m--;m===0&&d===null&&e("frac");return d}function J(){var d,b,g;m++;g=a(i);if(/^[0-9]/.test(f.charAt(i.offset))){b=f.charAt(i.offset);c(i,1)}else{b=null;m===0&&e("[0-9]")}if(b!==null)for(d=[];b!==null;){d.push(b);if(/^[0-9]/.test(f.charAt(i.offset))){b=f.charAt(i.offset);c(i,1)}else{b=null;m===0&&e("[0-9]")}}else d=null;d!==null&&(d=parseInt(d.join(""),10));d===null&&(i=a(g));m--;m===0&&d===null&&e("integer");return d}
function Q(){var d,b,g,k,l;m++;k=a(i);l=a(i);d=B();d=d!==null?d:"";if(d!==null){g=E();g===null&&(g=D());if(g!==null)for(b=[];g!==null;){b.push(g);g=E();g===null&&(g=D())}else b=null;if(b!==null)d=[d,b];else{d=null;i=a(l)}}else{d=null;i=a(l)}if(d!==null){b=d[0];d=d[1];d=d[0];if(b&&d){d.unshift(b);d=[false,d]}else d=[true,d]}d===null&&(i=a(k));if(d===null){k=a(i);l=a(i);if(f.charCodeAt(i.offset)===46){d=".";c(i,1)}else{d=null;m===0&&e('"."')}if(d!==null){b=[];g=E();for(g===null&&(g=D());g!==null;){b.push(g);
g=E();g===null&&(g=D())}if(b!==null)d=[d,b];else{d=null;i=a(l)}}else{d=null;i=a(l)}d!==null&&(d=d[1].length>0?[true,d[1][0]]:[true,[]]);d===null&&(i=a(k))}m--;m===0&&d===null&&e("path");return d}function B(){var d,b,g,k,l;m++;k=a(i);l=a(i);if(/^[a-zA-Z_$]/.test(f.charAt(i.offset))){d=f.charAt(i.offset);c(i,1)}else{d=null;m===0&&e("[a-zA-Z_$]")}if(d!==null){b=[];if(/^[0-9a-zA-Z_$\-]/.test(f.charAt(i.offset))){g=f.charAt(i.offset);c(i,1)}else{g=null;m===0&&e("[0-9a-zA-Z_$\\-]")}for(;g!==null;){b.push(g);
if(/^[0-9a-zA-Z_$\-]/.test(f.charAt(i.offset))){g=f.charAt(i.offset);c(i,1)}else{g=null;m===0&&e("[0-9a-zA-Z_$\\-]")}}if(b!==null)d=[d,b];else{d=null;i=a(l)}}else{d=null;i=a(l)}d!==null&&(d=d[0]+d[1].join(""));d===null&&(i=a(k));m--;m===0&&d===null&&e("key");return d}function D(){var d,b,g,k,l,h,j;m++;k=a(i);l=a(i);h=a(i);j=a(i);if(f.charCodeAt(i.offset)===91){d="[";c(i,1)}else{d=null;m===0&&e('"["')}if(d!==null){if(/^[0-9]/.test(f.charAt(i.offset))){g=f.charAt(i.offset);c(i,1)}else{g=null;m===0&&
e("[0-9]")}if(g!==null)for(b=[];g!==null;){b.push(g);if(/^[0-9]/.test(f.charAt(i.offset))){g=f.charAt(i.offset);c(i,1)}else{g=null;m===0&&e("[0-9]")}}else b=null;if(b!==null){if(f.charCodeAt(i.offset)===93){g="]";c(i,1)}else{g=null;m===0&&e('"]"')}if(g!==null)d=[d,b,g];else{d=null;i=a(j)}}else{d=null;i=a(j)}}else{d=null;i=a(j)}d!==null&&(d=d[1].join(""));d===null&&(i=a(h));if(d!==null){b=E();b=b!==null?b:"";if(b!==null)d=[d,b];else{d=null;i=a(l)}}else{d=null;i=a(l)}if(d!==null){b=d[0];(d=d[1])?d.unshift(b):
d=[b]}d===null&&(i=a(k));m--;m===0&&d===null&&e("array");return d}function E(){var d,b,g,k,l,h,j;m++;k=a(i);l=a(i);h=a(i);j=a(i);if(f.charCodeAt(i.offset)===46){b=".";c(i,1)}else{b=null;m===0&&e('"."')}if(b!==null){g=B();if(g!==null)b=[b,g];else{b=null;i=a(j)}}else{b=null;i=a(j)}b!==null&&(b=b[1]);b===null&&(i=a(h));if(b!==null)for(d=[];b!==null;){d.push(b);h=a(i);j=a(i);if(f.charCodeAt(i.offset)===46){b=".";c(i,1)}else{b=null;m===0&&e('"."')}if(b!==null){g=B();if(g!==null)b=[b,g];else{b=null;i=a(j)}}else{b=
null;i=a(j)}b!==null&&(b=b[1]);b===null&&(i=a(h))}else d=null;if(d!==null){b=D();b=b!==null?b:"";if(b!==null)d=[d,b];else{d=null;i=a(l)}}else{d=null;i=a(l)}if(d!==null){b=d[0];d=(d=d[1])?b.concat(d):b}d===null&&(i=a(k));m--;m===0&&d===null&&e("array_part");return d}function A(){var d,b,g,k,l;m++;k=a(i);l=a(i);if(f.charCodeAt(i.offset)===34){d='"';c(i,1)}else{d=null;m===0&&e('"\\""')}if(d!==null){if(f.charCodeAt(i.offset)===34){b='"';c(i,1)}else{b=null;m===0&&e('"\\""')}if(b!==null)d=[d,b];else{d=
null;i=a(l)}}else{d=null;i=a(l)}d!==null&&(d=["literal",""]);d===null&&(i=a(k));if(d===null){k=a(i);l=a(i);if(f.charCodeAt(i.offset)===34){d='"';c(i,1)}else{d=null;m===0&&e('"\\""')}if(d!==null){b=K();if(b!==null){if(f.charCodeAt(i.offset)===34){g='"';c(i,1)}else{g=null;m===0&&e('"\\""')}if(g!==null)d=[d,b,g];else{d=null;i=a(l)}}else{d=null;i=a(l)}}else{d=null;i=a(l)}d!==null&&(d=["literal",d[1]]);d===null&&(i=a(k));if(d===null){k=a(i);l=a(i);if(f.charCodeAt(i.offset)===34){d='"';c(i,1)}else{d=null;
m===0&&e('"\\""')}if(d!==null){g=N();if(g!==null)for(b=[];g!==null;){b.push(g);g=N()}else b=null;if(b!==null){if(f.charCodeAt(i.offset)===34){g='"';c(i,1)}else{g=null;m===0&&e('"\\""')}if(g!==null)d=[d,b,g];else{d=null;i=a(l)}}else{d=null;i=a(l)}}else{d=null;i=a(l)}d!==null&&(d=["body"].concat(d[1]));d===null&&(i=a(k))}}m--;m===0&&d===null&&e("inline");return d}function N(){var c,e;c=r();if(c===null){c=x();if(c===null){e=a(i);c=K();c!==null&&(c=["buffer",c]);c===null&&(i=a(e))}}return c}function H(){var d,
b,g,k,l,h,j,o;m++;h=a(i);j=a(i);d=P();if(d!==null){b=[];for(g=y();g!==null;){b.push(g);g=y()}if(b!==null)d=[d,b];else{d=null;i=a(j)}}else{d=null;i=a(j)}d!==null&&(d=["format",d[0],d[1].join("")]);d===null&&(i=a(h));if(d===null){h=a(i);j=a(i);o=a(i);l=a(i);m++;b=M();m--;if(b===null)b="";else{b=null;i=a(l)}if(b!==null){l=a(i);m++;g=P();m--;if(g===null)g="";else{g=null;i=a(l)}if(g!==null){l=a(i);m++;k=F();m--;if(k===null)k="";else{k=null;i=a(l)}if(k!==null){if(f.length>i.offset){l=f.charAt(i.offset);
c(i,1)}else{l=null;m===0&&e("any character")}if(l!==null)b=[b,g,k,l];else{b=null;i=a(o)}}else{b=null;i=a(o)}}else{b=null;i=a(o)}}else{b=null;i=a(o)}b!==null&&(b=b[3]);b===null&&(i=a(j));if(b!==null)for(d=[];b!==null;){d.push(b);j=a(i);o=a(i);l=a(i);m++;b=M();m--;if(b===null)b="";else{b=null;i=a(l)}if(b!==null){l=a(i);m++;g=P();m--;if(g===null)g="";else{g=null;i=a(l)}if(g!==null){l=a(i);m++;k=F();m--;if(k===null)k="";else{k=null;i=a(l)}if(k!==null){if(f.length>i.offset){l=f.charAt(i.offset);c(i,1)}else{l=
null;m===0&&e("any character")}if(l!==null)b=[b,g,k,l];else{b=null;i=a(o)}}else{b=null;i=a(o)}}else{b=null;i=a(o)}}else{b=null;i=a(o)}b!==null&&(b=b[3]);b===null&&(i=a(j))}else d=null;d!==null&&(d=["buffer",d.join("")]);d===null&&(i=a(h))}m--;m===0&&d===null&&e("buffer");return d}function K(){var d,b,g,k,l,h;m++;k=a(i);l=a(i);h=a(i);g=a(i);m++;b=M();m--;if(b===null)b="";else{b=null;i=a(g)}if(b!==null){g=w();if(g===null)if(/^[^"]/.test(f.charAt(i.offset))){g=f.charAt(i.offset);c(i,1)}else{g=null;m===
0&&e('[^"]')}if(g!==null)b=[b,g];else{b=null;i=a(h)}}else{b=null;i=a(h)}b!==null&&(b=b[1]);b===null&&(i=a(l));if(b!==null)for(d=[];b!==null;){d.push(b);l=a(i);h=a(i);g=a(i);m++;b=M();m--;if(b===null)b="";else{b=null;i=a(g)}if(b!==null){g=w();if(g===null)if(/^[^"]/.test(f.charAt(i.offset))){g=f.charAt(i.offset);c(i,1)}else{g=null;m===0&&e('[^"]')}if(g!==null)b=[b,g];else{b=null;i=a(h)}}else{b=null;i=a(h)}b!==null&&(b=b[1]);b===null&&(i=a(l))}else d=null;d!==null&&(d=d.join(""));d===null&&(i=a(k));
m--;m===0&&d===null&&e("literal");return d}function w(){var d,b;b=a(i);if(f.substr(i.offset,2)==='\\"'){d='\\"';c(i,2)}else{d=null;m===0&&e('"\\\\\\""')}d!==null&&(d='"');d===null&&(i=a(b));return d}function F(){var d,b,g,k,l,h,j,o;m++;l=a(i);h=a(i);if(f.substr(i.offset,2)==="{!"){d="{!";c(i,2)}else{d=null;m===0&&e('"{!"')}if(d!==null){b=[];j=a(i);o=a(i);k=a(i);m++;if(f.substr(i.offset,2)==="!}"){g="!}";c(i,2)}else{g=null;m===0&&e('"!}"')}m--;if(g===null)g="";else{g=null;i=a(k)}if(g!==null){if(f.length>
i.offset){k=f.charAt(i.offset);c(i,1)}else{k=null;m===0&&e("any character")}if(k!==null)g=[g,k];else{g=null;i=a(o)}}else{g=null;i=a(o)}g!==null&&(g=g[1]);for(g===null&&(i=a(j));g!==null;){b.push(g);j=a(i);o=a(i);k=a(i);m++;if(f.substr(i.offset,2)==="!}"){g="!}";c(i,2)}else{g=null;m===0&&e('"!}"')}m--;if(g===null)g="";else{g=null;i=a(k)}if(g!==null){if(f.length>i.offset){k=f.charAt(i.offset);c(i,1)}else{k=null;m===0&&e("any character")}if(k!==null)g=[g,k];else{g=null;i=a(o)}}else{g=null;i=a(o)}g!==
null&&(g=g[1]);g===null&&(i=a(j))}if(b!==null){if(f.substr(i.offset,2)==="!}"){g="!}";c(i,2)}else{g=null;m===0&&e('"!}"')}if(g!==null)d=[d,b,g];else{d=null;i=a(h)}}else{d=null;i=a(h)}}else{d=null;i=a(h)}d!==null&&(d=["comment",d[1].join("")]);d===null&&(i=a(l));m--;m===0&&d===null&&e("comment");return d}function M(){var d,b,g,k,l,h,j,o,n;o=a(i);d=I();if(d!==null){if(/^[#?^><+%:@\/~%]/.test(f.charAt(i.offset))){b=f.charAt(i.offset);c(i,1)}else{b=null;m===0&&e("[#?^><+%:@\\/~%]")}if(b!==null){g=[];
for(k=y();k!==null;){g.push(k);k=y()}if(g!==null){n=a(i);j=a(i);m++;l=G();m--;if(l===null)l="";else{l=null;i=a(j)}if(l!==null){j=a(i);m++;h=P();m--;if(h===null)h="";else{h=null;i=a(j)}if(h!==null){if(f.length>i.offset){j=f.charAt(i.offset);c(i,1)}else{j=null;m===0&&e("any character")}if(j!==null)l=[l,h,j];else{l=null;i=a(n)}}else{l=null;i=a(n)}}else{l=null;i=a(n)}if(l!==null)for(k=[];l!==null;){k.push(l);n=a(i);j=a(i);m++;l=G();m--;if(l===null)l="";else{l=null;i=a(j)}if(l!==null){j=a(i);m++;h=P();
m--;if(h===null)h="";else{h=null;i=a(j)}if(h!==null){if(f.length>i.offset){j=f.charAt(i.offset);c(i,1)}else{j=null;m===0&&e("any character")}if(j!==null)l=[l,h,j];else{l=null;i=a(n)}}else{l=null;i=a(n)}}else{l=null;i=a(n)}}else k=null;if(k!==null){l=[];for(h=y();h!==null;){l.push(h);h=y()}if(l!==null){h=G();if(h!==null)d=[d,b,g,k,l,h];else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}}else{d=null;i=a(o)}d===null&&(d=x());return d}function I(){var a;
if(f.charCodeAt(i.offset)===123){a="{";c(i,1)}else{a=null;m===0&&e('"{"')}return a}function G(){var a;if(f.charCodeAt(i.offset)===125){a="}";c(i,1)}else{a=null;m===0&&e('"}"')}return a}function P(){var a;if(f.charCodeAt(i.offset)===10){a="\n";c(i,1)}else{a=null;m===0&&e('"\\n"')}if(a===null){if(f.substr(i.offset,2)==="\r\n"){a="\r\n";c(i,2)}else{a=null;m===0&&e('"\\r\\n"')}if(a===null){if(f.charCodeAt(i.offset)===13){a="\r";c(i,1)}else{a=null;m===0&&e('"\\r"')}if(a===null){if(f.charCodeAt(i.offset)===
8232){a="\u2028";c(i,1)}else{a=null;m===0&&e('"\\u2028"')}if(a===null)if(f.charCodeAt(i.offset)===8233){a="\u2029";c(i,1)}else{a=null;m===0&&e('"\\u2029"')}}}}return a}function y(){var a;if(/^[\t\x0B\f \xA0\uFEFF]/.test(f.charAt(i.offset))){a=f.charAt(i.offset);c(i,1)}else{a=null;m===0&&e("[\\t\\x0B\\f \\xA0\\uFEFF]")}a===null&&(a=P());return a}function U(a){a.sort();for(var c=null,d=[],e=0;e<a.length;e++)if(a[e]!==c){d.push(a[e]);c=a[e]}return d}var O={body:g,part:k,section:o,sec_tag_start:n,end_tag:q,
context:p,params:s,bodies:t,reference:x,partial:u,filters:v,special:r,identifier:z,number:C,frac:L,integer:J,path:Q,key:B,array:D,array_part:E,inline:A,inline_part:N,buffer:H,literal:K,esc:w,comment:F,tag:M,ld:I,rd:G,eol:P,ws:y};if(d!==void 0){if(O[d]===void 0)throw Error("Invalid rule name: "+b(d)+".");}else d="body";var i={offset:0,line:1,column:1,seenCR:false},m=0,R={offset:0,line:1,column:1,seenCR:false},S=[],O=O[d]();if(O===null||i.offset!==f.length){var O=Math.max(i.offset,R.offset),V=O<f.length?
f.charAt(O):null,T=i.offset>R.offset?i:R;throw new h.SyntaxError(U(S),V,O,T.line,T.column);}return O},toSource:function(){return this._source},SyntaxError:function(f,d,a,c,e){this.name="SyntaxError";this.expected=f;this.found=d;switch(f.length){case 0:f="end of input";break;case 1:f=f[0];break;default:f=f.slice(0,f.length-1).join(", ")+" or "+f[f.length-1]}d=d?b(d):"end of input";this.message="Expected "+f+" but "+d+" found.";this.offset=a;this.line=c;this.column=e}};g.SyntaxError.prototype=Error.prototype;
return g}();b.parse=h.parse})("undefined"!==typeof exports?exports:getGlobal());
(function(){function b(d){d=d.current();return typeof d==="object"&&d.isSelect===true}function h(d,a){return typeof a==="function"?a.toString():a}function j(d,a,c,e,l){var e=e||{},k=c.block,h,j,q=e.filterOpType||"";if(typeof e.key!=="undefined")h=dust.helpers.tap(e.key,d,a);else if(b(a)){h=a.current().selectKey;a.current().isResolved&&(l=function(){return false})}else{f.log("No key specified for filter in:"+q+" helper ");return d}j=dust.helpers.tap(e.value,d,a);if(l(g(j,e.type,a),g(h,e.type,a))){if(b(a))a.current().isResolved=
true;if(k)return d.render(k,a);f.log("Missing body block in the "+q+" helper ")}else if(c["else"])return d.render(c["else"],a);return d}function g(d,a,c){if(d)switch(a||typeof d){case "number":return+d;case "string":return""+d;case "boolean":return Boolean(d==="false"?false:d);case "date":return new Date(d);case "context":return c.get(d)}return d}typeof exports!=="undefined"&&(dust=require("dustjs-linkedin"));var f=typeof console!=="undefined"?console:{log:function(){}};dust.helpers={tap:function(d,
a,c){var e=d;if(typeof d==="function")if(d.isFunction===true)e=d();else{e="";a.tap(function(a){e=e+a;return""}).render(d,c).untap();e===""&&(e=false)}return e},sep:function(d,a,c){return a.stack.index===a.stack.of-1?d:c.block?c.block(d,a):d},idx:function(d,a,c){return c.block?c.block(d,a.push(a.stack.index)):d},contextDump:function(d,a,c,e){e=e||{};c=e.to||"output";e=e.key||"current";c=dust.helpers.tap(c,d,a);e=dust.helpers.tap(e,d,a);a=e==="full"?JSON.stringify(a.stack,h,2):JSON.stringify(a.stack.head,
h,2);if(c==="console"){f.log(a);return d}return d.write(a)},"if":function(d,a,c,e){var b=c.block,g=c["else"];if(e&&e.cond){e=e.cond;e=dust.helpers.tap(e,d,a);if(eval(e)){if(b)return d.render(c.block,a);f.log("Missing body block in the if helper!");return d}if(g)return d.render(c["else"],a)}else f.log("No condition given in the if helper!");return d},math:function(d,a,c,e){if(e&&typeof e.key!=="undefined"&&e.method){var b=e.key,g=e.method,e=e.operand,h=null,b=dust.helpers.tap(b,d,a),e=dust.helpers.tap(e,
d,a);switch(g){case "mod":(e===0||e===-0.0)&&f.log("operand for divide operation is 0/-0: expect Nan!");h=parseFloat(b)%parseFloat(e);break;case "add":h=parseFloat(b)+parseFloat(e);break;case "subtract":h=parseFloat(b)-parseFloat(e);break;case "multiply":h=parseFloat(b)*parseFloat(e);break;case "divide":(e===0||e===-0.0)&&f.log("operand for divide operation is 0/-0: expect Nan/Infinity!");h=parseFloat(b)/parseFloat(e);break;case "ceil":h=Math.ceil(parseFloat(b));break;case "floor":h=Math.floor(parseFloat(b));
break;case "abs":h=Math.abs(parseFloat(b));break;default:f.log("method passed is not supported")}if(h!==null)return c&&c.block?d.render(c.block,a.push({isSelect:true,isResolved:false,selectKey:h})):d.write(h)}else f.log("Key is a required parameter for math helper along with method/operand!");return d},select:function(d,a,c,e){var b=c.block;if(e&&typeof e.key!=="undefined"){e=dust.helpers.tap(e.key,d,a);if(b)return d.render(c.block,a.push({isSelect:true,isResolved:false,selectKey:e}));f.log("Missing body block in the select helper ")}else f.log("No key given in the select helper!");
return d},eq:function(d,a,c,e){if(e)e.filterOpType="eq";return j(d,a,c,e,function(a,c){return c===a})},ne:function(d,a,c,e){if(e){e.filterOpType="ne";return j(d,a,c,e,function(a,c){return c!==a})}return d},lt:function(d,a,c,e){if(e){e.filterOpType="lt";return j(d,a,c,e,function(a,c){return c<a})}},lte:function(d,a,c,e){if(e){e.filterOpType="lte";return j(d,a,c,e,function(a,c){return c<=a})}return d},gt:function(d,a,c,e){if(e){e.filterOpType="gt";return j(d,a,c,e,function(a,c){return c>a})}return d},
gte:function(d,a,c,e){if(e){e.filterOpType="gte";return j(d,a,c,e,function(a,c){return c>=a})}return d},"default":function(d,a,c,e){if(e)e.filterOpType="default";return j(d,a,c,e,function(){return true})},size:function(d,a,c,e){var a=0,f,e=e||{},e=e.key;if(!e||e===true)a=0;else if(dust.isArray(e))a=e.length;else if(!isNaN(parseFloat(e))&&isFinite(e))a=e;else if(typeof e==="object"){a=0;for(f in e)Object.hasOwnProperty.call(e,f)&&a++}else a=(e+"").length;return d.write(a)}};if(typeof exports!=="undefined")module.exports=
dust})();
(function(){var b=Math,h=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"";/android/gi.test(navigator.appVersion);var j=/iphone|ipad/gi.test(navigator.appVersion),g=/playbook/gi.test(navigator.appVersion),f=/hp-tablet/gi.test(navigator.appVersion),d="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!f,c=h+"Transform"in document.documentElement.style,e=j||g,l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,17)}}(),k=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,o="onorientationchange"in window?"orientationchange":"resize",n=a?"touchstart":"mousedown",q=a?"touchmove":"mousemove",p=a?
"touchend":"mouseup",s=a?"touchcancel":"mouseup",t="translate"+(d?"3d(":"("),x=d?",0)":")",j=function(d,f){var b=document,g;this.wrapper=typeof d=="object"?d:b.getElementById(d);this.wrapper.style.overflow="hidden";this.scroller=this.wrapper.children[0];this.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,
onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(g in f)this.options[g]=f[g];this.x=this.options.x;this.y=this.options.y;this.options.useTransform=c?this.options.useTransform:false;this.options.hScrollbar=this.options.hScroll&&this.options.hScrollbar;this.options.vScrollbar=this.options.vScroll&&this.options.vScrollbar;this.options.useTransition=e&&this.options.useTransition;this.scroller.style[h+"TransitionProperty"]=this.options.useTransform?"-"+h.toLowerCase()+
"-transform":"top left";this.scroller.style[h+"TransitionDuration"]="0";this.scroller.style[h+"TransformOrigin"]="0 0";this.options.useTransition&&(this.scroller.style[h+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");this.options.useTransform?this.scroller.style[h+"Transform"]=t+this.x+"px,"+this.y+"px"+x:this.scroller.style.cssText=this.scroller.style.cssText+(";position:absolute;top:"+this.y+"px;left:"+this.x+"px");this.refresh();this._bind(o,window);this._bind(n);a||this._bind("mouseout",
this.wrapper)};j.prototype={enabled:true,x:0,y:0,steps:[],scale:1,handleEvent:function(c){switch(c.type){case n:if(!a&&c.button!==0)break;this._start(c);break;case q:this._move(c);break;case p:case s:this._end(c);break;case o:this._resize();break;case "mouseout":this._mouseout(c);break;case "webkitTransitionEnd":this._transitionEnd(c)}},_resize:function(){this.refresh()},_pos:function(a,c){a=this.hScroll?a:0;c=this.vScroll?c:0;if(this.options.useTransform)this.scroller.style[h+"Transform"]=t+a+"px,"+
c+"px"+x+" scale("+this.scale+")";else{a=a>>0;c=c>>0;this.scroller.style.left=a+"px";this.scroller.style.top=c+"px"}this.x=a;this.y=c},_start:function(c){var d=a?c.touches[0]:c,e,f;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,c);this.options.useTransition&&this._transitionTime(0);this.zoomed=this.animating=this.moved=false;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.momentum){if(this.options.useTransform){e=
getComputedStyle(this.scroller,null)[h+"Transform"].replace(/[^0-9-.,]/g,"").split(",");f=e[4]*1;e=e[5]*1}else{f=getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,"")*1;e=getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(f!=this.x||e!=this.y){this.options.useTransition?this._unbind("webkitTransitionEnd"):k(this.aniTime);this.steps=[];this._pos(f,e)}}this.startX=this.x;this.startY=this.y;this.pointX=d.pageX;this.pointY=d.pageY;this.startTime=c.timeStamp||Date.now();this.options.onScrollStart&&
this.options.onScrollStart.call(this,c);this._bind(q);this._bind(p);this._bind(s)}},_move:function(c){var d=a?c.touches[0]:c,e=d.pageX-this.pointX,f=d.pageY-this.pointY,g=this.x+e,k=this.y+f,h=c.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,c);this.pointX=d.pageX;this.pointY=d.pageY;if(g>0||g<this.maxScrollX)g=this.options.bounce?this.x+e/2:g>=0||this.maxScrollX>=0?0:this.maxScrollX;if(k>0||k<this.maxScrollY)k=this.options.bounce?this.y+f/2:k>=0||
this.maxScrollY>=0?0:this.maxScrollY;this.distX=this.distX+e;this.distY=this.distY+f;this.absDistX=b.abs(this.distX);this.absDistY=b.abs(this.distY);if(!(this.absDistX<6&&this.absDistY<6)){if(this.options.lockDirection)if(this.absDistX>this.absDistY+5){k=this.y;f=0}else if(this.absDistY>this.absDistX+5){g=this.x;e=0}this.moved=true;this._pos(g,k);this.dirX=e>0?-1:e<0?1:0;this.dirY=f>0?-1:f<0?1:0;if(h-this.startTime>300){this.startTime=h;this.startX=this.x;this.startY=this.y}this.options.onScrollMove&&
this.options.onScrollMove.call(this,c)}},_end:function(c){if(!(a&&c.touches.length!=0)){var d=a?c.changedTouches[0]:c,e,f,g={dist:0,time:0},k={dist:0,time:0},h=(c.timeStamp||Date.now())-this.startTime;e=this.x;f=this.y;this._unbind(q);this._unbind(p);this._unbind(s);this.options.onBeforeScrollEnd&&this.options.onBeforeScrollEnd.call(this,c);if(this.moved){if(h<300&&this.options.momentum){g=e?this._momentum(e-this.startX,h,-this.x,this.scrollerW-this.wrapperW+this.x,this.options.bounce?this.wrapperW:
0):g;k=f?this._momentum(f-this.startY,h,-this.y,this.maxScrollY<0?this.scrollerH-this.wrapperH+this.y:0,this.options.bounce?this.wrapperH:0):k;e=this.x+g.dist;f=this.y+k.dist;if(this.x>0&&e>0||this.x<this.maxScrollX&&e<this.maxScrollX)g={dist:0,time:0};if(this.y>0&&f>0||this.y<this.maxScrollY&&f<this.maxScrollY)k={dist:0,time:0}}if(g.dist||k.dist){d=b.max(b.max(g.time,k.time),10);this.scrollTo(e>>0,f>>0,d)}else this._resetPos(200)}else{if(a){for(e=d.target;e.nodeType!=1;)e=e.parentNode;if(e.tagName!=
"SELECT"&&e.tagName!="INPUT"&&e.tagName!="TEXTAREA"){f=document.createEvent("MouseEvents");f.initMouseEvent("click",true,true,c.view,1,d.screenX,d.screenY,d.clientX,d.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null);f._fake=true;e.dispatchEvent(f)}}this._resetPos(200)}this.options.onTouchEnd&&this.options.onTouchEnd.call(this,c)}},_resetPos:function(a){var c=this.x>=0?0:this.x<this.maxScrollX?this.maxScrollX:this.x,e=this.y>=0||this.maxScrollY>0?0:this.y<this.maxScrollY?this.maxScrollY:this.y;
if(c==this.x&&e==this.y){if(this.moved){this.options.onScrollEnd&&this.options.onScrollEnd.call(this);this.moved=false}}else this.scrollTo(c,e,a||0)},_mouseout:function(a){var c=a.relatedTarget;if(c)for(;c=c.parentNode;)if(c==this.wrapper)return;this._end(a)},_transitionEnd:function(a){if(a.target==this.scroller){this._unbind("webkitTransitionEnd");this._startAni()}},_startAni:function(){var a=this,c=a.x,e=a.y,d=Date.now(),f,g,k;if(!a.animating)if(a.steps.length){f=a.steps.shift();if(f.x==c&&f.y==
e)f.time=0;a.animating=true;a.moved=true;if(a.options.useTransition){a._transitionTime(f.time);a._pos(f.x,f.y);a.animating=false;f.time?a._bind("webkitTransitionEnd"):a._resetPos(0)}else{k=function(){var h=Date.now(),j;if(h>=d+f.time){a._pos(f.x,f.y);a.animating=false;a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a);a._startAni()}else{h=(h-d)/f.time-1;g=b.sqrt(1-h*h);h=(f.x-c)*g+c;j=(f.y-e)*g+e;a._pos(h,j);if(a.animating)a.aniTime=l(k)}};k()}}else a._resetPos(400)},_transitionTime:function(a){this.scroller.style[h+
"TransitionDuration"]=a+"ms"},_momentum:function(a,c,e,d,f){var c=b.abs(a)/c,g=c*c/0.0012;if(a>0&&g>e){e=e+f/(6/(g/c*6.0E-4));c=c*e/g;g=e}else if(a<0&&g>d){d=d+f/(6/(g/c*6.0E-4));c=c*d/g;g=d}return{dist:g*(a<0?-1:1),time:c/6.0E-4>>0}},_offset:function(a){for(var c=-a.offsetLeft,e=-a.offsetTop;a=a.offsetParent;){c=c-a.offsetLeft;e=e-a.offsetTop}return{left:c,top:e}},_bind:function(a,c,e){(c||this.scroller).addEventListener(a,this,!!e)},_unbind:function(a,c,e){(c||this.scroller).removeEventListener(a,
this,!!e)},destroy:function(){this.scroller.style[h+"Transform"]="";this._unbind(o,window);this._unbind(n);this._unbind(q);this._unbind(p);this._unbind(s);this._unbind("mouseout",this.wrapper);this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a;this.wrapperW=this.wrapper.clientWidth;this.wrapperH=this.wrapper.clientHeight;this.scrollerW=this.scroller.offsetWidth;this.scrollerH=this.scroller.offsetHeight;
this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH;this.dirY=this.dirX=0;this.hScroll=this.options.hScroll&&this.maxScrollX<0;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;this.scroller.style[h+"TransitionDuration"]="0";this._resetPos(200)},scrollTo:function(a,c,e,d){var f=a;this.stop();f.length||(f=[{x:a,y:c,time:e,
relative:d}]);a=0;for(c=f.length;a<c;a++){if(f[a].relative){f[a].x=this.x-f[a].x;f[a].y=this.y-f[a].y}this.steps.push({x:f[a].x,y:f[a].y,time:f[a].time||0})}this._startAni()},scrollToElement:function(a,c){var e;if(a=a.nodeType?a:this.scroller.querySelector(a)){e=this._offset(a);e.left=e.left+this.wrapperOffsetLeft;e.top=e.top+this.wrapperOffsetTop;e.left=e.left>0?0:e.left<this.maxScrollX?this.maxScrollX:e.left;e.top=e.top>0?0:e.top<this.maxScrollY?this.maxScrollY:e.top;c=c===void 0?b.max(b.abs(e.left)*
2,b.abs(e.top)*2):c;this.scrollTo(e.left,e.top,c)}},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(q);this._unbind(p);this._unbind(s)},enable:function(){this.enabled=true},stop:function(){k(this.aniTime);this.steps=[];this.animating=this.moved=false}};typeof exports!=="undefined"?exports.iScroll=j:window.iScroll=j})();
var LZ77=function(b){var b=b||{},h=b.referenceIntBase||96,j=32+h-1,g=Math.pow(h,2)-1,f=b.minStringLength||5,d=Math.pow(h,1)-1+f,a=b.defaultWindowLength||144,c=g+f,e=function(a,c){if(a>=0&&a<Math.pow(h,c)-1){for(var e="";a>0;){e=String.fromCharCode(a%h+32)+e;a=Math.floor(a/h)}for(var d=c-e.length,f=0;f<d;f++)e=String.fromCharCode(32)+e;return e}throw"Reference int out of range: "+a+" (width = "+c+")";},l=function(a,c){for(var e=0,d=0;d<c;d++){var e=e*h,f=a.charCodeAt(d);if(f>=32&&f<=j)e=e+(f-32);else throw"Invalid char code in reference int: "+
f;}return e};this.compress=function(b,h){h=h||a;if(h>c)throw"Window length too large";for(var l="",j=0,p=b.length-f;j<p;){for(var s=Math.max(j-h,0),t=f,x=false,u=g,v=0,r=null;s+t<j;)if(b.substr(s,t)==b.substr(j,t)&&t<d){t++;x=true}else{t=t-1;if(x&&t>v){u=j-s-t;v=t}t=f;s++;x=false}if(v){r="`"+e(u,2)+e(v-f,1);j=j+v}else{r=b.charAt(j)!="`"?b.charAt(j):"``";j++}l=l+r}return l+b.slice(j).replace(/`/g,"``")};this.decompress=function(a){for(var c="",e=0;e<a.length;){var d=a.charAt(e);if(d!="`"){c=c+d;e++}else if(a.charAt(e+
1)!="`"){var d=l(a.substr(e+1,2),2),b;b=a.charAt(e+3);b=l(b,1)+f;c=c+c.substr(c.length-d-b,b);e=e+(f-1)}else{c=c+"`";e=e+2}}return c}};
(function(b,h){var j=0;b.$=h.noConflict?h.noConflict():h;b.resolve=function(b,f){if(!b)return null;for(var b=b.split("."),d=window,a=window,c=-1,e;e=b[++c];){a=a[e];if(!a)if(f)a=d[e]={};else return null;d=a}return a};b.extend=function(g,f,d){function a(){}if(typeof g=="object"){d=g;g=Object;f=function(){}}else if(typeof f=="object"){d=f;f=g;g=Object}a.prototype=g.prototype;f.prototype=new a;f.prototype.constructor=f;if(d)for(var c in d)f.prototype[c]=d[c];f.extend=function(a,c){if(typeof a=="object"){c=
a;a=function(){f.apply(this,arguments)}}b.extend(f,a,c);return a};return f};b.log=function(){window.console?console.log.apply(console,arguments):alert([].join.call(arguments," "))};b.uuid=function(){return j++};b.delay=function(b,f,d){return setTimeout(function(){b.call(f)},d||0)};b.clone=function(g,f){return g?g instanceof Array?g.slice(0):g instanceof Date?new Date(g.getTime()):typeof g=="object"?b.merge(f,{},g):g.valueOf():g};b.merge=function(g,f){var d=-1,a=[].slice.call(arguments,2),c,e;if(typeof g==
"object"){a.unshift(f);f=g;g=false}for(;c=a[++d];)for(e in c)c.hasOwnProperty(e)&&(f[e]=g?b.clone(c[e]):c[e]);return f};h.fn.dataAttrs=function(){for(var b={},f=this[0].attributes,d=-1,a;a=f[++d];)if(a.name.indexOf("data-")==0)b[a.name.slice(5)]=a.value;return b};if(!h.proxy)h.proxy=function(b,f){return function(){b.apply(f,arguments)}};if(!h.fn.detach)h.fn.detach=h.fn.remove})(window.Lavaca=window.Lavaca||{},window.jQuery||window.Zepto||window.jMiny);
(function(b){b.indexOf=function(b,j){if(b){if(b.indexOf)return b.indexOf(j);for(var g=0,f=b.length;g<f;g++)if(b[g]===j)return g}return-1};b.contains=function(h,j){return b.indexOf(h,j)>-1};b.remove=function(h,j){var g=b.indexOf(h,j);g>-1&&h.splice(g,1);return g};b.pushIfNotExists=function(h,j){var g=b.indexOf(h,j);if(g==-1)h[g=h.length]=j;return g}})(Lavaca.resolve("Lavaca.util.ArrayUtils",!0));
(function(b){function h(a){return parseInt(a,10)}function j(a,c){for(var a=a.toLowerCase(),e=-1,d;d=c[++e];)if(a==d.toLowerCase()||a==f(d).toLowerCase())return e-1;throw'Invalid code "'+d+'"';}function g(a,c,e){for(var d=a<0?"-":"",e=e||"0",a=Math.abs(a).toString();c-a.length>0;)a=e+a;return d+a}function f(a){Lavaca.util.Translation&&(result=Lavaca.util.Translation.get(a));return result?result:a}function d(a){for(var c=[],e="",d=-1,f,b;b=a.charAt(++d);){f=e.charAt(0);if(f==b||f=='"'||f=="'"){e=e+
b;if(f=='"'&&b=='"'||f=="'"&&b=="'"){c.push(e);e=""}}else{e&&c.push(e);e=b}}e&&c.push(e);return c}b.timeOfDayDesignatorAbbr=["A","P"];b.timeOfDayDesignator=["AM","PM"];b.daysOfWeekAbbr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];b.daysOfWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];b.monthsAbbr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];b.months=["January","February","March","April","May","June","July","August","September","October","November",
"December"];b.fn={d:{exp:"\\d{1,2}",i:function(a,c){c.date=h(a)},o:function(a,c){return(c?a.getUTCDate():a.getDate()).toString()}},dd:{exp:"\\d{2}",i:function(a,c){c.date=h(a)},o:function(a,c){return g(b.fn.d.o(a,c),2)}},ddd:{exp:"[a-z]{3}",i:function(){},o:function(a,c){return f(b.daysOfWeekAbbr[c?a.getUTCDay():a.getDay()])}},dddd:{exp:"[a-z]+",i:function(){},o:function(a,c){return f(b.daysOfWeek[c?a.getUTCDay():a.getDay()])}},f:{exp:"\\d",i:function(a,c){c.ms=h(a)*100},o:function(a,c,e){e=e||100;
return g(Math.floor((c?a.getUTCMilliseconds():a.getMilliseconds())/e),3-e.toString().length)}},ff:{exp:"\\d{2}",i:function(a,c){c.ms=h(a)*10},o:function(a,c){return g(b.fn.f.o(a,c,10),2)}},fff:{exp:"\\d{3}",i:function(a,c){c.ms=h(a,10)},o:function(a,c){return g(b.fn.f.o(a,c,1),3)}},h:{exp:"1?\\d",i:function(a,c,e){a=h(a)-1;e=(e.t||e.tt||"A").indexOf("A")==0?0:12;c.hour=a+e},o:function(a,c){return((c?a.getUTCHours():a.getHours())%12+1).toString()}},hh:{exp:"[0-1]\\d",i:function(a,c,e){b.fn.h.i(a,c,
e)},o:function(a,c){return g(b.fn.h.o(a,c),2)}},H:{exp:"[0-2]?\\d",i:function(a,c){c.hour=h(a)},o:function(a,c){return(c?a.getUTCHours():a.getHours()).toString()}},HH:{exp:"[0-2]\\d",i:function(a,c){c.hour=h(a)},o:function(a,c){return g(b.fn.H.o(a,c),2)}},m:{exp:"[1-5]?\\d",i:function(a,c){c.minute=h(a)},o:function(a,c){return(c?a.getUTCMinutes():a.getMinutes()).toString()}},mm:{exp:"[0-5]\\d",i:function(a,c,e){b.fn.m.i(a,c,e)},o:function(a,c){return g(b.fn.m.o(a,c),2)}},M:{exp:"1?\\d",i:function(a,
c){c.month=h(a)-1},o:function(a,c){return((c?a.getUTCMonth():a.getMonth())+1).toString()}},MM:{exp:"[0-1]\\d",i:function(a,c,e){b.fn.M.i(a,c,e)},o:function(a,c){return g(b.fn.M.o(a,c),2)}},MMM:{exp:"[a-z]{3}",i:function(a,c){c.month=j(a,b.monthsAbbr)},o:function(a,c){return f(b.monthsAbbr[c?a.getUTCMonth():a.getMonth()])}},MMMM:{exp:"[a-z]+",i:function(a,c){c.month=j(a,b.months)},o:function(a,c){return f(b.months[c?a.getUTCMonth():a.getMonth()])}},s:{exp:"[1-5]?\\d",i:function(a,c){c.second=h(a)},
o:function(a,c){return(c?a.getUTCSeconds():a.getSeconds()).toString()}},ss:{exp:"[0-5]\\d",i:function(a,c,e){b.fn.s.i(a,c,e)},o:function(a,c){return g(b.fn.s.o(a,c),2)}},t:{exp:"[a-z]",i:function(){},o:function(a,c){return f(b.timeOfDayDesignatorAbbr[Math.floor((c?a.getUTCHours():a.getHours())/12)])}},tt:{exp:"[a-z]+",i:function(){},o:function(a,c){return f(b.timeOfDayDesignator[Math.floor((c?a.getUTCHours():a.getHours())/12)])}},y:{exp:"\\d?\\d",i:function(a,c){c.year=(new Date).getFullYear()%100+
h(a)},o:function(a,c){return((c?a.getUTCFullYear():a.getFullYear())%100).toString()}},yy:{exp:"\\d{2}",i:function(a,c,e){b.fn.y.i(a,c,e)},o:function(a,c){return g(b.fn.y.o(a,c),2)}},yyy:{exp:"\\d*\\d{3}",i:function(a,c){c.year=h(a)},o:function(a,c){return g(c?a.getUTCFullYear():a.getFullYear(),3)}},yyyy:{exp:"\\d*\\d{4}",i:function(a,c,e){b.fn.yyy.i(a,c,e)},o:function(a,c){return g(c?a.getUTCFullYear():a.getFullYear(),4)}},z:{exp:"[-+]?1?\\d",i:function(a,c){c.offset=h(a)*60},o:function(a,c){var e=
a.getTimezoneOffset(),d=Math.floor(Math.abs(e/60));return(e<0?"-":"+")+g(d,c)}},zz:{exp:"[-+]?[0-1]\\d",i:function(a,c,e){b.fn.z.i(a,c,e)},o:function(a){return b.fn.z.o(a,2)}},zzz:{exp:"[-+]?[0-1]\\d:\\d{2}",i:function(a,c){var e=a.split(":");c.offset=h(e[0])*60+h(e[1])},o:function(a){var a=a.getTimezoneOffset(),c=a%60;return(a<0?"-":"+")+g((a-c)/60,2)+":"+g(Math.abs(c),2)}}};b.parse=function(a,c){for(var e=d(c),f,k=["^"],h=-1,j;j=e[++h];)(f=b.fn[j])?k.push("(",f.exp,")"):k.push("(",j.replace(/(^")|(^')|('$)|("$)/g,
"").replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),")");k.push("$");f=RegExp(k.join(""));k={year:0,month:0,date:1,hour:0,minute:0,second:0,ms:0,offset:0};h={};j=-1;var q;if(f.test(a))for(f=f.exec(a);q=e[++j];)h[q]=f[j+1];for(q in h)(e=b.fn[q])&&e.i(h[q],k,h);return new Date(b.monthsAbbr[k.month]+" "+g(k.date,2)+" "+g(k.year,4)+" "+g(k.hour,2)+":"+g(k.minute,2)+":"+g(k.second,2)+(k.ms>0?"."+g(k.ms,3):"")+(k.offset>=0?"+":"-")+g(Math.floor(Math.abs(k.offset/60)),2)+g(Math.abs(k.offset%60),2))};b.stringify=
function(a,c,e){for(var c=d(c),f=-1,g=[],h,j;h=c[++f];)(j=b.fn[h])?g.push(j.o(a,e)):g.push(h.replace(/(^")|(^')|('$)|("$)/g,""));return g.join("")}})(Lavaca.resolve("Lavaca.util.DateUtils",!0));(function(b){function h(b){var g,f,d;for(g in b){if(b.hasOwnProperty(g))if(f=b[g])if(typeof f.dispose=="function")f.dispose();else if(f instanceof Array)for(d=f.length-1;d>-1;d--)h(f[d]);delete b[g]}}b.Disposable=Lavaca.extend({dispose:function(){h(this)}})})(Lavaca.resolve("Lavaca.util",!0));
(function(b,h){b.Cache=h.extend({get:function(b,g){var f=this["@"+b];f===void 0&&g!==void 0&&(f=this["@"+b]=g);return f===void 0?null:f},set:function(b,g){this["@"+b]=g},add:function(b){var g=Lavaca.uuid();this.set(g,b);return g},remove:function(b){delete this["@"+b]},each:function(b,g){for(var f in this)this.hasOwnProperty(f)&&f.indexOf("@")==0&&b.call(g||this,f.slice(1),this[f])},toObject:function(){var b={};this.each(function(g,f){b[g]=f&&typeof f.toObject==="function"?f.toObject():f});return b},
toJSON:function(){return JSON.stringify(this.toObject())}})})(Lavaca.util,Lavaca.util.Disposable);
(function(b,h,j){b.Map=j.extend(function(b,f,d){j.call(this);this.hasLoaded=false;this.name=b;(b=f)&&b.indexOf("http")!=0&&(b=b.charAt(0)=="/"?location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+(b.indexOf("/")==0?b:"/"+b):location.toString().split("#")[0].split("?")[0].replace(/\w+\.\w+$/,"")+b);this.src=b;this.code=d;this.cache=new Lavaca.util.Cache},{is:function(b){return this.name==b},get:function(b){if(!this.hasLoaded){this.code?this.add(this.code):this.src&&this.load(this.src);
this.hasLoaded=true}return this.cache.get(b)},add:function(b){for(var f in b)this.cache.set(f,b[f])},process:function(b){this.add(typeof b=="string"?JSON.parse(b):b)},load:function(b){var f=this;Lavaca.net.Connectivity.ajax({async:false,url:b,success:function(d){f.process(d)}})}});b.Map.setDefault=function(b,f){var d=f;typeof d=="string"&&(d=b.get(f));b.set("default",d)};b.Map.get=function(b,f,d,a){if(!d){d=f;f=a}if(f)if(b=b.get(f))return b.get(d);return null};b.Map.init=function(g,f,d,a){h(a||document.documentElement).find('script[type="'+
f+'"]').each(function(){var a=h(this),e=a.attr("data-src"),f=a.attr("data-name"),k=a.attr("data-default")!==null,a=a.text(),e=d(f,e,a);g.set(e.name,e);k&&b.Map.setDefault(g,f)})};b.Map.dispose=function(b){b.dispose()}})(Lavaca.util,Lavaca.$,Lavaca.util.Disposable);
(function(b,h,j){function g(d,a,c){c&&(c=JSON.parse(c));return new b.Config(d,a,c)}var f=new b.Cache;b.Config=j.extend({});b.Config.setDefault=function(d){j.setDefault(f,d)};b.Config.currentEnvironment=function(){return f.get("default").name};b.Config.get=function(d,a){return j.get(f,d,a,"default")};b.Config.init=function(d){j.init(f,"text/x-config",g,d)};b.Config.dispose=function(){j.dispose(f)}})(Lavaca.util,Lavaca.$,Lavaca.util.Map);
(function(b){b.Promise=Lavaca.extend(function(b){this.thisp=b;this.resolvedQueue=[];this.rejectedQueue=[]},{succeeded:false,failed:false,success:function(b){b&&(this.succeeded?b.apply(this.thisp,this.resolveArgs):this.resolvedQueue.push(b));return this},error:function(b){b&&(this.failed?b.apply(this.thisp,this.rejectArgs):this.rejectedQueue.push(b));return this},always:function(b){return this.then(b,b)},then:function(b,j){return this.success(b).error(j)},resolve:function(){if(!this.succeeded&&!this.failed){this.succeeded=
true;this.resolveArgs=[].slice.call(arguments,0);for(var b=-1,j;j=this.resolvedQueue[++b];)j.apply(this.thisp,this.resolveArgs)}return this},reject:function(){if(!this.succeeded&&!this.failed){this.failed=true;this.rejectArgs=[].slice.call(arguments,0);for(var b=-1,j;j=this.rejectedQueue[++b];)j.apply(this.thisp,this.rejectArgs)}return this},when:function(){for(var b=this,j=[],g=-1,f=arguments.length,d;d=arguments[++g];)(function(a){d.success(function(c){j[a]=c;--f<1&&b.resolve.apply(b,j)}).error(function(){b.reject.apply(b,
arguments)})})(g);d=null;return this},resolver:function(){var b=this;return function(){b.resolve.apply(b,arguments)}},rejector:function(){var b=this;return function(){b.reject.apply(b,arguments)}}});b.Promise.when=function(h){var j=h instanceof b.Promise,g=new b.Promise(j?window:h),j=[].slice.call(arguments,j?0:1);return g.when.apply(g,j)}})(Lavaca.resolve("Lavaca.util",!0));
(function(b,h){function j(b){return b}var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};b.format=function(b){var d,a=j,c,e;if(arguments[1]instanceof Array){d=arguments[1];a=arguments[2]||j}else d=[].slice.call(arguments,1);c=0;for(e=d.length;c<e;c++)b=b.split("{"+c+"}").join(a(d[c]+""));return b};b.escapeHTML=function(b){var b=""+b,d;for(d in g)b=b.split(d).join(g[d]);return b};b.compress=function(b){typeof b!="string"&&(b=JSON.stringify(b));return(new h).compress(b)};b.decompress=
function(b){return(new h).decompress(b)}})(Lavaca.resolve("Lavaca.util.StringUtils",!0),window.LZ77);
(function(b,h){function j(f,d,a){a&&(a=JSON.parse(a));f=new b.Translation(f,d,a);g.get(f.language)||g.set(f.language,f);return f}var g=new b.Cache;b.Translation=h.extend(function(b,d,a){h.apply(this,arguments);var c=b=b.toLowerCase().split("_");this.language=c[0];this.locale=(this.country=c[1]||"")?this.language+"_"+this.country:this.language},{is:function(b,d){return b==this.language&&(!d||!this.country||d==this.country)}});b.Translation.setDefault=function(f){g.remove("default");h.setDefault(g,
b.Translation.forLocale(f))};b.Translation.forLocale=function(b){b=(b||"default").toLowerCase();return g.get(b)||g.get(b.split("_")[0])||g.get("default")};b.Translation.get=function(f,d){if(!d){d=f;f="default"}var a=b.Translation.forLocale(f),c=null;a&&(c=a.get(d));if(c===null)(a=b.Translation.forLocale(f.split("_")[0]))&&(c=a.get(d));if(c===null)(a=b.Translation.forLocale("default"))&&(c=a.get(d));return c};b.Translation.init=function(f,d){h.init(g,"text/x-translation",j,d);b.Translation.setDefault(f)};
b.Translation.dispose=function(){h.dispose(g)}})(Lavaca.util,Lavaca.util.Map);
(function(b,h){b.EventDispatcher=h.extend({suppressEvents:false,on:function(b,g,f){var d=this.callbacks||(this.callbacks={}),b=d[b]||(d[b]=[]);b[b.length]={fn:g,thisp:f};return this},off:function(b,g,f){var d=this.callbacks,a,c=-1,e,h;if(b){if(d)if(g){if(a=d[b])for(d=d[b]=[];b=a[++c];){e=b.fn==g||b.fn.fn==g;h=f&&(b.thisp==f||b.fn.thisp==f);if(!e||e&&(!f||!h))d[d.length]=b}}else delete d[b]}else delete this.callbacks;return this},trigger:function(b,g){if(!this.suppressEvents&&this.callbacks){var f=
this.callbacks[b],d=this.createEvent(b,g),a=-1,c;if(f)for(;c=f[++a];)c.fn.apply(c.thisp||this,[d])}return this},createEvent:function(b,g){return Lavaca.merge({},g||{},{type:b,target:g&&g.target?g.target:this,currentTarget:this})}})})(Lavaca.resolve("Lavaca.events",!0),Lavaca.util.Disposable);
(function(b){var h=["screenX","screenY","clientX","clientY","pageX","pageY"];b.EventPoint=Lavaca.extend(function(b){this.init(b)},{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,init:function(b){for(var g=-1,f;f=h[++g];)this[f]=b?b[f]:null}})})(Lavaca.resolve("Lavaca.events",!0));(function(b){b.EventVector=Lavaca.extend(function(b,j,g){this.length=b;this.axis=j;this.compass=g},{length:0,axis:"vertical",compass:"north"})})(Lavaca.resolve("Lavaca.events",!0));
(function(b,h,j,g){function f(a,c){x[a]=function(a){c(a)}}function d(a,c){u[a]=function(a){c(a)}}function a(a,c){if(!a.touches&&a.originalEvent)a=a.originalEvent;a.touches&&a.touches.length?a=a.touches[c||0]:a.changedTouches&&a.changedTouches.length&&(a=a.changedTouches[c||0]);return new g(a)}function c(a,c){for(var e={},d=-1,b;b=s[++d];)e[b]=a[b]-c[b];return new g(e)}function e(a,c){return Math.sqrt((a.screenX-c.screenX)*(a.screenX-c.screenX)+(a.screenY-c.screenY)*(a.screenY-c.screenY))}function l(a,
c){var e=a.screenX-c.screenX,d=a.screenY-c.screenY;return e*e>d*d?new j(Math.abs(e),"horizontal",e>0?"east":"west"):new j(Math.abs(d),"vertical",d>0?"south":"north")}function k(a,c){var e=-1,d;if(null!==a&&c.changedTouches){for(;d=c.changedTouches[++e];)if(d.identifier===a)return d;return null}return c}function o(a){if(a){for(var c in a)typeof a[c]!="function"&&(this[c]=a[c]);this.originalEvent=a}}var n="mousedown",q="mousemove",p="mouseup",s=["screenX","screenY","clientX","clientY","pageX","pageY"],
t=false,x={},u={};(function(){var a=document.createElement("div");a.setAttribute("ontouchstart","return;");a.setAttribute("ongesturestart","return;");if(t=typeof a.ontouchstart=="function"){n="touchstart";q="touchmove";p="touchend"}})();(function(){h(document.body).on(q,function(a){for(var c in x)x[c](a)}).on(p,function(a){for(var c in u)u[c](a)})})();o.prototype={preventDefault:function(){this.defaultPrevented=true;this.originalEvent&&this.originalEvent.preventDefault()},stopPropagation:function(){this.originalEvent&&
this.originalEvent.stopPropagation()}};b.moveThreshold=4;b.tapholdDuration=800;b.isSupported=function(){return t};b.bind=function(g,h,j,q,p,s){function t(a){var d=new o(a);if(a){d.startTime=B;d.elapsed=(new Date).getTime()-B;d.startPoint=D;d.lastPoint=E;d.currentPoint=A;d.hasMoved=N||(N=!(e(D,A)<=b.moveThreshold));if(D&&A){d.startDelta=c(A,D);d.startDistance=e(A,D);d.startVector=l(A,D)}if(A&&E){d.lastDelta=c(A,E);d.lastDistance=e(A,E);d.lastVector=l(A,E)}}return d}if(typeof h=="function"){h={start:h,
move:j,end:q};s=p}if(h&&typeof h=="object"){s=j;j=h;h=null}if(j&&typeof j=="object"){q=j.move;p=j.end;j=j.start;s=q}var B,D,E,A,N=false,H=false,K,w={},F;w.click=function(a){H&&a.preventDefault()};w[n]=function(c){var c=c.originalEvent||c,e=this,b=Lavaca.uuid();B=(new Date).getTime();D=E=A=a(c);N=false;c.changedTouches&&c.changedTouches.length?K=c.changedTouches[0].identifier:idenfifier=null;j&&j.call(s||e,t(c));H=H||c.defaultPrevented;f(b,function(c){var d=k(K,c);if(null!==d){A=a(d);if(q){c=t(c);
c.currentTarget=e;q.call(s||e,c);H=H||c.defaultPrevented}E=A}});d(b,function(c){var d=k(K,c);if(null!==d){A=a(d);if(p){c=t(c);c.currentTarget=e;p.call(s||e,c);H=H||c.defaultPrevented}delete x[b];delete u[b];e=null}})};for(F in w)if(h)g.on(F,h,w[F]);else g.on(F,w[F]);g=null};h.fn.touch=function(a,c,e,d,f){if(a instanceof Function){f=d;d=e;e=c;c=a;a=null}b.bind(this,a,c,e,d,f);return this};h.fn.tap=function(a,c,e){if(typeof a=="function"){e=c;c=a;a=null}if(t){b.bind(this,a,null,null,function(a){!a.hasMoved&&
c&&c.apply(e||this,arguments)});this.on("click",a,function(a){a.preventDefault()})}else this.on("click",a,function(){c.apply(e||this,arguments)});return this};h.fn.taphold=function(a,c,e,d){if(typeof a=="function"){d=e;e=c;c=a;a=null}e=e||b.tapholdDuration;this.tap(a,function(a){a.elapsed>=e&&c&&c.apply(this,arguments)},d);return this};h.fn.swipe=function(a,c,e,d){if(typeof a=="function"){e=c;c=a;a=null}var e=e||{},f=e.minDistance||30,g=e.maxDistance||Number.MAX_VALUE,k=e.direction||"horizontal",
h=e.timeLimit||1E3,l=e.cancel||null,j=e.move||null,o=e.end||null;b.bind(this,a,e.start||null,function(a){a.elapsed<=h&&j&&j.apply(d||this,arguments)},function(a){o&&o.apply(d||this,arguments);a.elapsed<=h&&(k==a.startVector.compass||k==a.startVector.axis)&&a.startVector.length>=f&&a.startVector.length<=g?c&&c.apply(d||this,arguments):l&&l.apply(d||this,arguments)});return this}})(Lavaca.resolve("Lavaca.events.Touch",!0),Lavaca.$,Lavaca.events.EventVector,Lavaca.events.EventPoint);
(function(b,h,j){var g=false,f=[];b.isCordova=function(){return!!j};b.mobileBrowser=function(){var d={};d.agent=navigator.userAgent.toLowerCase();d.scrWidth=screen.width;d.scrHeight=screen.height;d.elemWidth=document.documentElement.clientWidth;d.elemHeight=document.documentElement.clientHeight;d.otherBrowser=d.agent.indexOf("series60")!=-1||d.agent.indexOf("symbian")!=-1||d.agent.indexOf("windows ce")!=-1||d.agent.indexOf("blackberry")!=-1;d.mobileOS=typeof orientation!="undefined"?true:false;d.touchOS=
"ontouchstart"in document.documentElement?true:false;d.blackberry=d.agent.indexOf("blackberry")>-1;d.ipad=d.agent.indexOf("ipad")!=-1?true:false;d.ipod=d.agent.indexOf("ipod")!=-1?true:false;d.iphone=d.agent.indexOf("iphone")!=-1?true:false;d.palm=d.agent.indexOf("palm")!=-1?true:false;d.symbian=d.agent.indexOf("symbian")!=-1?true:false;d.iOS=d.iphone||d.ipod||d.ipad?true:false;d.android=d.agent.indexOf("android")!=-1||!d.iOS&&!d.otherBrowser&&d.touchOS&&d.mobileOS?true:false;d.android2=d.android&&
d.agent.indexOf("android 2")!=-1?true:false;d.isMobile=d.android||d.iOS||d.mobileOS||d.touchOS?true:false;return d};b.register=function(d,a){function c(){if(!window.plugins)window.plugins={};window.plugins[d]=new a}g?c():f.push(c)};b.exec=function(d,a,c){var e=new Lavaca.util.Promise(window);j?j.exec(e.resolver(),e.rejector(),d,a,c):e.reject();return e};b.init=function(d){if(document.addEventListener)document.addEventListener("deviceready",d,false);else h(document).on("deviceready",d)};h(document).ready(function(){for(var d=
-1,a;a=f[++d];)a();g=true;if(!j)if(document.createEvent){d=document.createEvent("Events");d.initEvent("deviceready",true,false);document.dispatchEvent(d)}else if(document.fireEvent){d=document.createEventObject();d.eventType="deviceready";document.fireEvent("ondeviceready",d)}})})(Lavaca.resolve("Lavaca.env.Device",!0),Lavaca.$,window.Cordova||window.cordova);
(function(b,h){b.Badge=Lavaca.events.EventDispatcher.extend({get:function(){return h.exec("Badge","get")},set:function(b){var g=this;return h.exec("Badge","set",[b]).success(function(b){g.trigger("change",{count:b})})},increment:function(b){var b=b||1,g=this,f=new Lavaca.util.Promise;this.get().success(function(d){g.set(d+b).success(f.resolver()).error(f.rejector())}).error(f.rejector());return f},decrement:function(b){return self.increment(-(b||1))},clear:function(){return this.set(0)}});h.register("badge",
b.Badge)})(Lavaca.env,Lavaca.env.Device);(function(b,h){b.ChildBrowser=Lavaca.events.EventDispatcher.extend({showWebPage:function(b){if(h.isCordova())return h.exec("ChildBrowser","showWebPage",[b]).error(function(){window.location.href=b});window.open(b);return(new Lavaca.util.Promise(window)).resolve()},close:function(){return h.exec("ChildBrowser","close",[])}});h.register("childBrowser",b.ChildBrowser)})(Lavaca.env,Lavaca.env.Device);
(function(b,h,j){function g(d,a,c,e,b){if(c===f){c=a;a=""}e||(e=[]);var e=[].concat(e),g=-1,h=e.length,c=[c,function(a){d=="confirm"&&(a===f||a===h||h===0&&a==2)?b.reject((h||2)-1):b.resolve(a-1)},a],j=[];for(d=="confirm"&&e.push(e.shift());a=e[++g];){j.push(a.name);if(a.exec)b[d=="confirm"&&g==e.length-1?"error":"success"](function(a,c){return function(e){e===f&&(e=h);e==a&&c(a)}}(g,a.exec))}c.push(j.join(","));navigator.notification[d].apply(navigator.notification,c)}var f;b.Notification=Lavaca.events.EventDispatcher.extend({alert:function(d,
a,c){var e=new j;if(h.isCordova())g("alert",d,a,c,e);else if(window.alert){(button=(c||[])[0])&&button.exec&&e.then(button.exec);alert(a||d);e.resolve(0)}else e.reject();return e},confirm:function(d,a,c){var e=new j;if(h.isCordova())g("confirm",d,a,c,e);else if(window.confirm){c&&e.success((c[1]||{}).exec).error((c[0]||{}).exec);confirm(a)?e.resolve(1):e.reject(0)}else e.reject();return e}});h.register("notification",b.Notification)})(Lavaca.env,Lavaca.env.Device,Lavaca.util.Promise);
(function(b,h){var j={animation:["animation","animationend","keyframes"],webkitAnimation:["-webkit-animation","webkitAnimationEnd","-webkit-keyframes"],MozAnimation:["-moz-animation","animationend","-moz-keyframes"],OAnimation:["-o-animation","oAnimationEnd","-o-keyframes"],MSAnimation:["-ms-animation","MSAnimationEnd","-ms-keyframes"]},g,f,d,a;(function(){var c=document.createElement("div").style,e;for(e in j)if(e in c){c=j[e];g=e;f=c[0];a=c[1];d=c[2];break}})();b.isSupported=function(){return!!g};
b.keyframesToCSS=function(a,e){var b=Lavaca.fx.Transform,f=["@",d," ",a,"{"],g,h,j,p;for(g in e){f.push(g,"{");h=e[g];if(typeof h=="string")f.push(h);else for(j in h){p=h[j];if(j=="transform"&&b){j=b.cssProperty();p=b.toCSS(p)}f.push(j,":",p,";")}f.push("}")}f.push("}");return f.join("")};b.generateKeyframes=function(a,e){if(typeof a=="object"){e=a;a="a"+(new Date).getTime()}var d=b.keyframesToCSS(a,e);h("<style>"+d+"</style>").appendTo("head");return a};b.cssProperty=function(){return f};h.fn.keyframe=
function(a,e,d,f,g,h,j){if(b.isSupported()){typeof a=="object"&&(a=b.generateKeyframes(a));if(typeof e=="object"){j=e.complete;h=e.direction;g=e.iterations;f=e.delay;d=e.easing;e=e.duration}h=h||"normal";g=g||1;f=f||0;d=d||"linear";e=e||1;typeof e=="number"&&(e=e+"ms");typeof f=="number"&&(f=f+"ms");j&&this.nextAnimationEnd(j);this.css(b.cssProperty(),[a,e,d,f,g,h].join(" "))}return this};h.fn.animationEnd=function(c,e){return a?this.on(a,c,e):this};h.fn.nextAnimationEnd=function(c,e){return a?this.one(a,
c,e):this}})(Lavaca.resolve("Lavaca.fx.Animation",!0),Lavaca.$);
(function(b,h){function j(a,e){var d=a.indexOf("rotate")==0,b=a=="scale",f=a.indexOf("translate")==0;/(X|Y|Z)$/.test(a);var g,h=[];if(typeof e=="object")for(g in e)h.push(a+g.toUpperCase()+"("+(f?typeof e[g]=="number"?e[g]+"px":e[g]:d?typeof e[g]=="number"?e[g]+"deg":e[g]:b?typeof e[g]=="number"?e[g]+","+e[g]:e[g]:e[g])+")");else{b?e=typeof e=="number"?e+","+e:e:d?e=typeof e=="number"?e+"deg":e:f&&(e=typeof e=="number"?e+"px":e);h.push(a+"("+e+")")}return h.join(" ")}var g={transform:"transform",
webkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",MSTransform:"-ms-transform"},f,d,a=false;(function(){var c=document.createElement("div").style,e;for(e in g)if(e in c){f=e;d=g[e];c[e]="translate3d(0,0,0)";a=c[e].indexOf("translate3d")>-1&&navigator.userAgent.indexOf("Android")==-1;break}})();b.isSupported=function(){return!!f};b.is3dSupported=function(){return a};b.toCSS=function(a){var e=[],d;if(typeof a=="object")for(d in a)e.push(j(d,a[d]));else e.push(a);
return e.join(" ")};b.cssProperty=function(){return d};h.fn.transform=function(a,e){if(b.isSupported()){a=b.toCSS(a);e&&typeof e=="object"&&(e=(typeof e.x=="number"?e.x*100+"%":e.x)+(e.y===void 0?"":" "+(typeof e.y=="number"?e.y*100+"%":e.y)));this.each(function(){this.style[f]=a;e&&(this.style[f+"Origin"]=e)})}return this}})(Lavaca.resolve("Lavaca.fx.Transform",!0),Lavaca.$);
(function(b,h){var j={transition:["transition","transitionend"],webkitTransition:["-webkit-transition","webkitTransitionEnd"],MozTransition:["-moz-transition","MozTransitionEnd"],OTransition:["-o-transition","OTransitionEnd"],MSTransition:["-ms-transition","MSTransitionEnd"]},g,f,d;(function(){var a=document.createElement("div").style,c;for(c in j)if(c in a){g=c;f=j[c][0];d=j[c][1];break}})();b.isSupported=function(){return!!g};b.toCSS=function(a,c,e){var e=e||"linear",d=[],b=a instanceof Array,f;
for(f in a){b&&(f=a[f]);d.push(f+" "+c+"ms "+e)}return d.join(",")};b.cssProperty=function(){return f};h.fn.transition=function(a,c,e,d){if(e instanceof Function){d=e;e=null}if(b.isSupported()){var f=b.toCSS(a,c,e);d&&this.nextTransitionEnd(d);this.each(function(){this.style[g]=f});this.css(a)}else{this.css(a);d&&d.call(this[0],{})}return this};h.fn.transitionEnd=function(a,c){return d?this.on(d,a,c):this};h.fn.nextTransitionEnd=function(a,c){return d?this.one(d,a,c):this}})(Lavaca.resolve("Lavaca.fx.Transition",
!0),Lavaca.$);
(function(b,h,j,g){b.Controller=h.extend(function(f,d){if(f instanceof b.Controller){this.router=f.router;this.viewManager=f.viewManager}else{this.router=f;this.viewManager=d}},{router:null,viewManager:null,exec:function(b,d,a){this.params=d;this.state=a;var c=new j(this),e;if(a){e=a.state;c.success(function(){document.title=a.title})}b=this[b](d,e);b instanceof j?c.when(b):c.resolve();return c},ajax:function(b){return j.when(this,Lavaca.net.Connectivity.ajax(b))},view:function(b,d,a,c){return j.when(this,
this.viewManager.load(b,d,a,c))},ajaxThenView:function(b,d,a,c,e){var g=new j(this),h=this;this.ajax(b).success(function(b){g.when(this.view(a,c,d.apply(h,arguments),e))}).error(function(){g.reject.apply(g,arguments)});return g},history:function(b,d,a,c){var e=!this.state;return function(){if(e)Lavaca.net.History[c?"replace":"push"](b,d,a)}},translate:function(b,d){var a=Lavaca.util.Translation.get(b);a&&d&&(a=g.format.apply(null,[a].concat(d)));return a},url:function(b,d){return g.format(b,d,encodeURIComponent)},
redirect:function(b,d){return this.router.unlock().exec(this.url(b,d||[]))},ajaxThenRedirect:function(b,d){var a=new j(this),c=this;this.ajax(b).success(function(e){a.when(this.redirect(d.apply(c,arguments)))}).error(function(){a.reject.apply(a,arguments)});return a},dispose:function(){this.router=this.viewManager=null;h.prototype.dispose.apply(this,arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable,Lavaca.util.Promise,Lavaca.util.StringUtils,Lavaca.$);
(function(b,h,j,g,f){function d(a,c,d,b,f,g){a.trigger(c,{attribute:d,previous:b===e?null:b,value:f===e?a.get(d):f,messages:g||[]})}function a(a,c,e){for(var c=!!c,d=["suppressValidation","suppressEvents","suppressTracking"],b={},f=-1,g;g=d[++f];){b[g]=a[g];a[g]=c||a[g]}c=e.call(a);for(f=-1;g=d[++f];)a[g]=b[g];return c}function c(a){var c=true,e;for(e in a)a[e].length>0&&(c=false);a.isValid=c;return a}var e;b.Model=h.extend(function(a){h.call(this);this.attributes=new j;this.rules=new j;this.unsavedAttributes=
[];this.flags={};this.defaults&&(a=Lavaca.merge({},this.defaults,a));if(a){this.suppressEvents=this.suppressTracking=true;this.apply(a);this.suppressEvents=this.suppressTracking=false}},{suppressValidation:false,suppressTracking:false,get:function(a){a=this.attributes.get(a);return typeof a==="function"?a.call(this):a},canSet:function(){return true},set:function(c,e,b,g){return a(this,g,function(){if(!this.canSet(c))return false;var a=this.attributes.get(c),g=this.suppressValidation?[]:this.validate(c,
e);if(g.length){d(this,"invalid",c,a,e,g);return false}if(a!==e){this.attributes.set(c,e);if(b){(g=this.flags[b])||(g=this.flags[b]=[]);f.contains(g,c)||g.push(c)}d(this,"change",c,a,e);!this.suppressTracking&&!Lavaca.util.ArrayUtils.contains(this.unsavedAttributes,c)&&this.unsavedAttributes.push(c)}return true})},has:function(a){return this.get(a)!==null},idAttribute:"id",id:function(){return this.get(this.idAttribute)},isNew:function(){return null===this.id()},parse:function(a){typeof a=="string"&&
(a=JSON.parse(a));return a},apply:function(c,e){a(this,e,function(){c=this.parse(c);for(var a in c)this.set(a,c[a])})},clear:function(a){if(a){var a=this.flags[a],c=-1,e,d;if(a)for(;e=a[++c];){f.remove(this.unsavedAttributes,e);(d=this.get(e))&&d.dispose&&d.dispose();this.set(e,null)}}else{this.attributes.dispose();this.attributes=new j;this.unsavedAttributes.length=0}},clone:function(){return new this.constructor(this.attributes.toObject())},addRule:function(a,c,e){this.rules.get(a,[]).push({rule:c,
message:e})},validate:function(a,d){var b,f,g=-1,h;if(a){b=[];d=d===e?this.get(a,d):d;if(f=this.rules.get(a))for(;h=f[++g];)h.rule(a,d)||b.push(h.message);return b}b={};this.rules.each(function(a){b[a]=this.validate(a)},this);return c(b)},onFetchSuccess:function(a){a=this.parse(a);this.apply(a,true);this.trigger("fetchSuccess",{response:a})},onFetchError:function(a){this.trigger("fetchError",{response:a})},fetch:function(a,c){c=Lavaca.clone(c||{});c.url=a;return g.when(this,Lavaca.net.Connectivity.ajax(c)).success(this.onFetchSuccess).error(this.onFetchError)},
save:function(a,c){for(var d=new g(this),b=this.toObject(),f={},h=-1,j;j=this.unsavedAttributes[++h];)f[j]=b[j];d.success(function(a){var c=this.idAttribute;this.isNew()&&a[c]!==e&&this.set(c,a[c]);this.unsavedAttributes=[];this.trigger("saveSuccess",{response:a})}).error(function(a){this.trigger("saveError",{response:a})});b=a.call(c||this,this,f,b);b instanceof g?d.when(b):b?d.resolve(b):d.reject(b);return d},saveToServer:function(a){return this.save(function(c,e,d){c=this.id();this.isNew()?e=d:
e[this.idAttribute]=c;return g.when(this,Lavaca.net.Connectivity.ajax({url:a,cache:false,type:"POST",data:e,dataType:"json"}))})},toObject:function(){var a=this.attributes.toObject(),c;for(c in a)typeof a[c]==="function"&&(a[c]=a[c].call(this));return a},toJSON:function(){return JSON.stringify(this.toObject())},on:function(a,c,e,d){function b(a){if(!c||a.attribute==c)e.call(d||this,a)}if(typeof c=="function"){d=e;e=c;c=null}b.fn=e;b.thisp=d;return h.prototype.on.call(this,a,b,d)}});b.Model.SENSITIVE=
"sensitive"})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.events.EventDispatcher,Lavaca.util.Cache,Lavaca.util.Promise,Lavaca.util.ArrayUtils);
(function(b,h,j,g,f){function d(a,e,d,b,f){a.trigger(e,{previousIndex:d,index:b,model:f})}function a(a,e){var d=e?1:-1;return function(e,b){var f=e.get(a),g=b.get(a);return f==g?0:f<g?d:-d}}b.Collection=h.extend(function(a,e){h.call(this,e);this.models=[];this.changedOrder=false;this.addedItems=[];this.removedItems=[];this.changedItems=[];if(a){this.suppressEvents=true;this.add.apply(this,a);this.suppressEvents=false}},{TModel:b.Model,itemsProperty:"items",clear:function(){h.prototype.clear.apply(this,
arguments);for(var a=-1,e;e=this.models[++a];)this.remove(e);this.changedOrder=false;this.addedItems.length=this.removedItems.length=this.changedItems.length=this.models.length=0},prepare:function(a){a=a instanceof this.TModel?a:this.TModel.prototype instanceof b.Collection?new this.TModel(a[this.TModel.prototype.itemsProperty],a):new this.TModel(a);if(f.indexOf(this.models,a)==-1)a.on("change",this.onItemEvent,this).on("invalid",this.onItemEvent,this).on("saveSuccess",this.onItemEvent,this).on("saveError",
this.onItemEvent,this);return a},canSet:function(a){return a!=this.itemsProperty},add:function(){if(arguments.length&&arguments[0]instanceof Array)return this.add.apply(this,arguments[0]);var a=false,e,b,g,h,j;b=0;for(g=arguments.length;b<g;b++){h=arguments[b];(j=h instanceof this.TModel)||(e=h);h=this.prepare(h);j=this.first(e||h.toObject());if(!j){this.models.push(h);if(!this.suppressTracking){f.remove(this.removedItems,h);f.remove(this.changedItems,h);f.pushIfNotExists(this.addedItems,h)}d(this,
"addItem",null,this.models.length-1,h);a=true}}return a},moveTo:function(a,e){a instanceof this.TModel&&(a=f.indexOf(this.models,a));if(a>-1){var b=this.models.splice(a,1)[0];if(b){this.models.splice(e,0,b);if(!this.suppressTracking)this.changedOrder=true;d(this,"moveItem",a,e,b)}}},remove:function(a){if(a instanceof this.TModel){var e=f.remove(this.models,a);if(e>-1){if(!this.suppressTracking){f.remove(this.addedItems,a);f.remove(this.changedItems,a);f.pushIfNotExists(this.removedItems,a)}a.off("change",
this.onItemEvent).off("invalid",this.onItemEvent).off("saveSuccess",this.onItemEvent).off("saveError",this.onItemEvent);d(this,"removeItem",e,null,a);return true}return false}for(var e=this.filter(a),b=-1,g=false;a=e[++b];)g=this.remove(a)||g;return g},filter:function(a,e){var e=e===void 0?Number.MAX_VALUE:e,d=[],b=-1,f,g,h;if(typeof a!="function"){g=a;a=function(a,c){for(h in g)if(c.get(h)!=g[h])return false;return true}}for(;f=this.models[++b];)if(a(b,f)){d.push(f);if(--e<1)break}return d},first:function(a){return this.filter(a,
1)[0]||null},itemAt:function(a){return this.models[a]},count:function(){return this.models.length},each:function(a,e){for(var d=-1,b;b=this.itemAt(++d);)a.call(e||this,d,b)},sort:function(c,e){var d=typeof c==="function"?c:a(c,e),b=Lavaca.clone(this.models);this.models.sort(d,this);if(!this.suppressTracking)this.changedOrder=true;this.trigger("rearrange",{oldModels:b,newModels:this.models});return this},reverse:function(){var a=Lavaca.clone(this.models);this.models.reverse();if(!this.suppressTracking)this.changedOrder=
true;this.trigger("rearrange",{oldModels:a,newModels:this.models});return this},onItemEvent:function(a){var e=a.target,d=f.indexOf(this.models,e);a.type=="change"?f.pushIfNotExists(this.changedItems,e):a.type=="saveSuccess"&&f.remove(this.changedItems,e);this.trigger(a.type+"Item",Lavaca.merge({},a,{target:e,model:e,index:d,previousIndex:null}))},onFetchSuccess:function(a){var e=a=this.parse(a);if(!(e instanceof Array)){this.apply(a);e=a[this.itemsProperty]}this.add.apply(this,e);this.trigger("fetchSuccess",
{response:a})},saveToServer:function(a){return this.save(function(e,d,b){e=this.id();this.isNew()?d=b:d[this.idAttribute]=e;return(new g(this)).when(Lavaca.net.Connectivity.ajax({url:a,cache:false,type:"POST",data:d,dataType:"json"}))})},toObject:function(a){for(var d=h.prototype.toObject.apply(this,arguments),b=this.itemsProperty,f=d[b]=[],g=-1,j;j=this.models[++g];)f[d[b].length]=a&&!j.isNew()?j.id():j.toObject();return d}})})(Lavaca.mvc,Lavaca.mvc.Model,Lavaca.util.Cache,Lavaca.util.Promise,Lavaca.util.ArrayUtils);
(function(b,h){function j(){return RegExp("\\{\\*(.*?)\\}","g")}function g(b){b=decodeURIComponent(b);if(isNaN(b))if(b.toLowerCase()=="true")b=true;else if(b.toLowerCase()=="false")b=false;else{if(RegExp("^\\d{4}-[0-1]\\d-[0-3]\\d$","g").test(b)){b=b.split("-");b=new Date(Number(b[0]),Number(b[1])-1,Number(b[2]))}}else b=Number(b);return b}b.Route=h.extend(function(b,d,a,c){h.call(this);this.pattern=b;this.TController=d;this.action=a;this.params=c||{}},{matches:function(b){var d;d=this.pattern;if(d==
"/")d=RegExp("^\\/(\\?.*)?(#.*)?$","g");else{d.charAt(0)=="/"&&(d=d.slice(1));d=d.split("/");for(var a="^",c=-1,e;e=d[++c];)a=j().test(e)?a+"(/([^/?#]+))*?":RegExp("\\{([^\\/]*?)\\}","g").test(e)?a+"/([^/?#]+)":a+("/"+e);d=RegExp(a+"(\\?.*)?(#.*)?$","g")}return d.test(b)},parse:function(b){var d=Lavaca.clone(this.params),a=this.pattern.slice(1),c=b.split("#"),e,h,k;d.url=b;d.route=this;c=c[1]?c[1].split("?"):c[0].split("?");if(e=c[1]){b=-1;for(e=e.split("&");h=e[++b];){h=h.split("=");k=decodeURIComponent(h[0]);
if(d[k]!==void 0){d[k]instanceof Array||(d[k]=[d[k]]);d[k].push(g(h[1]))}else d[k]=g(h[1])}}b=0;c=c[0].replace(/(^(http(s?)\:\/\/[^\/]+)?\/?)|(\/$)/,"");h=RegExp(a.replace(j(),"(.+)").replace(RegExp("\\{([^\\/]*?)\\}","g"),"([^/]+)"));c=h.exec(c);for(e=h.exec(a);h=c[++b];){a=e[b];j().test(a)&&(h=h.split("/"));d[a.replace(RegExp("[\\{\\}\\*]","g"),"")]=h}return d},exec:function(b,d,a,c,e){function g(){Lavaca.delay(h.dispose,h)}var h=new this.TController(d,a),b=this.parse(b),c=h.exec(this.action,Lavaca.merge(b,
e),c);c.then(g,g);return c}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable);
(function(b,h,j){b.Router=h.extend(function(b){h.call(this);this.routes=[];this.viewManager=b;this.onpopstate=function(b){this.hasNavigated&&this.exec(b.url,b)};Lavaca.net.History.on("popstate",this.onpopstate,this)},{locked:false,hasNavigated:false,add:function(g,f,d,a){if(typeof g=="object")for(var c in g){a=g[c];if(a instanceof Array){f=a[0];d=a[1];a=a[2]}else{f=a.controller;d=a.action;a=a.params}this.add(c,f,d,a)}else this.routes.push(new b.Route(g,f,d,a));return this},exec:function(b,f,d){if(this.locked)return(new j(this)).reject("locked");
this.locked=true;b||(b="/");b.indexOf("http")==0&&(b=b.replace(/^http(s?):\/\/.+?/,""));var a=-1,c,e=new j(this);e.always(function(){this.unlock()});for(this.hasNavigated||e.success(function(){this.hasNavigated=true});c=this.routes[++a];)if(c.matches(b))return e.when(c.exec(b,this,this.viewManager,f,d));return e.reject(b,f)},unlock:function(){this.locked=false;return this},dispose:function(){if(this.onpopstate){Lavaca.net.History.off("popstate",this.onpopstate);this.onpopstate=null}h.prototype.dispose.apply(this,
arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable,Lavaca.util.Promise);
(function(b,h,j,g){b.View=j.extend(function(b,d,a,c){j.call(this);this.model=b||null;this.layer=d||0;this.eventMap=a||{};this.widgetMap=c||{};this.widgets=new Lavaca.util.Cache;this.on("rendersuccess",this.onRenderSuccess).on("rendererror",this.onRenderError)},{el:null,shell:null,template:null,className:null,wrapper:function(){return h('<div class="view"></div>')},interior:function(){return h('<div class="view-interior"></div>')},render:function(){var f=new g(this),d=Lavaca.ui.Template.get(this.template),
a=this.model;a instanceof b.Model&&(a=a.toObject());this.el&&this.el.detach();this.shell=this.wrapper();this.el=this.interior();this.shell.append(this.el);this.shell.attr("data-layer-index",this.layer);this.className&&this.shell.addClass(this.className);f.success(function(a){this.trigger("rendersuccess",{html:a})}).error(function(a){this.trigger("rendererror",{err:a})});this.shell.addClass("tmpl-"+this.template.toLowerCase().replace(/\s/g,"-"));d.render(a).success(f.resolver()).error(f.rejector());
return f},redraw:function(f,d){var a=new g(this),c=new g(this),e=Lavaca.ui.Template.get(this.template),j;if(typeof f==="object"||f instanceof b.Model){d=f;j=true;f=null}else if(typeof f=="boolean"){j=f;f=null}else f||(j=true);if(!this.hasRendered)return c.rejector("View has not been rendered yet and cannot be redrawn.");d=d||this.model;d instanceof b.Model&&(d=d.toObject());a.success(function(a){if(j){this.el.html(a);c.resolve(a)}else if(f){var d=h("<div>"+a+"</div>").find(f),b=this.el.find(f);if(d.length>
0&&d.length===b.length){b.each(function(a){h(this).replaceWith(d.eq(a))});c.resolve(a)}else c.reject("Count of items matching selector is not the same in the original html and in the newly rendered html.")}else c.resolve(a)}).error(c.rejector());e.render(d).success(a.resolver()).error(a.rejector());return c},clearModelEvents:function(){var b,d;if(this.eventMap&&this.eventMap.model&&this.model&&this.model instanceof j)for(b in this.eventMap.model){d=this.eventMap.model[b];if(typeof d=="object")d=d.on;
this.model.off(b,d,this)}},applyEvents:function(){var b=this.el,d,a,c,e,g;for(c in this.eventMap){d=this.eventMap[c];for(e in d){a=d[e];if(typeof a=="object"){g=a;a=a.on}else g=void 0;if(c=="model"){if(this.model&&this.model instanceof j)this.model.on(e,a,this)}else if(e=="tap"&&b.tap)b.tap(c,a);else if(e=="taphold"&&b.taphold)b.taphold(c,a,g?g.duration:void 0);else if(e=="swipe"&&b.swipe)b.swipe(c,a,g);else if(e=="animationEnd"&&b.animationEnd)b.animationEnd(c,a);else if(e=="transitionEnd"&&b.transitionEnd)b.transitionEnd(c,
a);else b.on(e,c,a)}}},mapEvent:function(b,d,a){var c;if(typeof b=="object"){c=b;for(b in c)for(d in c[b])this.mapEvent(b,d,c[b][d])}else{(c=this.eventMap[b])||(c=this.eventMap[b]={});c[d]=a}return this},createWidgets:function(){var b=this.widgets,d,a,c;for(a in this.widgetMap){c=this.widgetMap[a];(a=="self"?this.el:this.el.find(a)).each(function(a,g){d=new c(h(g));b.set(d.id,d)})}},mapWidget:function(b,d){if(typeof b=="object"){var a=b;for(b in a)this.mapWidget(b,a[b])}else this.widgetMap[b]=d;return this},
insertInto:function(b){if(!this.shell.parent()[0]!=b[0]){for(var d=b.children("[data-layer-index]"),a=-1,c;c=d[++a];){c=h(c);if(c.attr("data-layer-index")>this.index){this.shell.insertBefore(c);return}}b.append(this.shell)}},enter:function(b){var d=new g(this),a,b=h(b);this.hasRendered||(a=this.render().error(d.rejector()));this.insertInto(b);a?d.when(a):Lavaca.delay(d.resolver());d.then(function(){this.trigger("enter")});return d},exit:function(){var b=new g(this);this.shell.detach();Lavaca.delay(b.resolver());
b.then(function(){this.trigger("exit")});return b},onRenderSuccess:function(b){this.el.html(b.html);this.applyEvents(this.el);this.createWidgets(this.el);this.hasRendered=true},onRenderError:function(b){Lavaca.log(b.err)},dispose:function(){this.model&&this.clearModelEvents();this.template=this.model=null;j.prototype.dispose.apply(this,arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.$,Lavaca.events.EventDispatcher,Lavaca.util.Promise);
(function(b,h,j,g,f,d){b.ViewManager=f.extend(function(a){f.call(this);this.el=j(a||document.body);this.views=new h.Cache;this.layers=[];this.exitingViews=[];this.enteringViews=[]},{locked:false,load:function(a,b,d,f){function h(){j.enteringViews=[n];q.success(function(){Lavaca.delay(function(){j.enteringViews=[]})});t=j.dismissLayersAbove(f-1,n);if(j.layers[f]!=n){p.when(n.enter(j.el,j.exitingViews),t).then(q.resolve);j.layers[f]=n}else q.when(t)}if(this.locked)return(new g(this)).reject("locked");
this.locked=true;var f=f||0,j=this,n=this.views.get(a),q=new g(this),p=new g(q),s=null,t=null;q.always(function(){this.locked=false});if(!n){n=new b(d,f);s=n.render();if(a!==null){this.views.set(a,n);n.cacheKey=a}}s?s.then(h,q.rejector()):h();return q},dismiss:function(a){if(typeof a=="number")this.dismissLayersAbove(a-1);else if(a instanceof Lavaca.mvc.View)this.dismiss(a.layer);else{var a=j(a),b=a.attr("data-layer-index");if(b===null){a=a.closest("[data-layer-index]");b=a.attr("data-layer-index")}b!==
null&&this.dismiss(Number(b))}},dismissLayersAbove:function(a,b){var e=new g(this),f=false,h,j;for(h=this.layers.length-1;h>a;h--)if((j=this.layers[h])&&(!b||b!=j)){(function(a){this.exitingViews.push(a);e.when(a.exit(this.el,this.enteringViews)).success(function(){Lavaca.delay(function(){d.remove(this.exitingViews,a);(!a.cacheKey||b&&b.cacheKey==a.cacheKey)&&a.dispose()},this)});this.layers[h]=null}).call(this,j);f=true}f||e.resolve();return e},flush:function(a){if(a)this.views.remove(a);else{for(var a=
-1,b;b=this.layers[++a];)b.cacheKey&&this.views.remove(b.cacheKey);this.views.dispose();this.views=new h.Cache}},dispose:function(){f.prototype.dispose.call(this)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util,Lavaca.$,Lavaca.util.Promise,Lavaca.util.Disposable,Lavaca.util.ArrayUtils);
(function(b,h,j){function g(b){b.preventDefault();b.stopPropagation()}b.Application=h.extend(function(b){Lavaca.env.Device.init(j.proxy(this.init,this));j(window).on("unload",j.proxy(this.dispose,this));if(b)this.on("init",b)},{TViewManager:Lavaca.mvc.ViewManager,TRouter:Lavaca.mvc.Router,TState:Lavaca.mvc.Model,initRoute:"/",initState:null,initParams:null,initLocale:"en_US",viewRootSelector:"#view-root",onInvalidRoute:function(b){b!="locked"&&plugins.notification.alert("An error occurred while trying to display this URL.")},
onTapLink:function(b){var d=j(b.currentTarget),a=d.attr("href"),c=d.attr("rel"),e=d.attr("target"),g=d.is("[data-external]");if(/^((mailto)|(tel)|(sms))\:/.test(a)){location.href=a;return true}b.preventDefault();if(c=="back")Lavaca.net.History.back();else if(g||c=="nofollow"||e=="_blank"){b.stopPropagation();plugins.childBrowser.showWebPage(a)}else c=="cancel"?this.viewManager.dismiss(b.currentTarget):a&&this.router.exec(a,null,d.dataAttrs()).error(this.onInvalidRoute)},ajax:function(){return Lavaca.net.Connectivity.ajax.apply(Lavaca.net.Connectivity,
arguments)},init:function(){var b=new Lavaca.util.Promise(this);this.mobileBrowser=Lavaca.env.Device.mobileBrowser();this.animations=!this.mobileBrowser.android;this.state=new this.TState;Lavaca.util.Config.init();this.state.set("lang",localStorage.getItem("app:lang")||this.initLocale);Lavaca.util.Translation.init(app.state.get("lang"));Lavaca.ui.Template.init();this.viewManager=new this.TViewManager(this.viewRootSelector);this.router=new this.TRouter(this.viewManager);j(document.body).tap("a",this.onTapLink,
this).tap(".ui-blocker",g);this.trigger("init");if(this.router.hasNavigated)b.resolve();else{b.when(this.router.exec(this.initialHashRoute||this.initRoute,this.initState,this.initParams));this.initState&&Lavaca.net.History.replace(this.initState.state,this.initState.title,this.initState.url)}return b.then(function(){this.trigger("ready")})},dispose:function(){this.trigger("dispose");Lavaca.util.Config.dispose();Lavaca.util.Translation.dispose();Lavaca.ui.Template.dispose();h.prototype.dispose.call(this)},
initialHashRoute:function(b){b=b.match(/^(?:#)(\/.*)#?@?/);return b instanceof Array&&b[1]?b[1].replace(/#.*/,""):null}(window.location.hash)})})(Lavaca.mvc,Lavaca.events.EventDispatcher,Lavaca.$);(function(b,h){function j(){throw"Not implemented";}b.Store=h.extend(function(b){this.id=b},{get:function(){j()},set:function(){j()},remove:function(){j()},all:function(){j()}})})(Lavaca.resolve("Lavaca.storage",!0),Lavaca.util.Disposable);
(function(b,h,j){function g(b){localStorage.setItem(b.id+"@manifest",JSON.stringify(b.manifest))}b.LocalStore=b.Store.extend(function(f){b.Store.call(this,f);this.manifest=JSON.parse(localStorage.getItem(this.id+"@manifest")||"[]")},{key:function(b){return this.id+":"+b},get:function(b){return(b=localStorage.getItem(this.key(b)))?JSON.parse(h.decompress(b)):null},set:function(b,d){localStorage.setItem(this.key(b),h.compress(JSON.stringify(d)));j.pushIfNotExists(this.manifest,b);g(this)},remove:function(b){localStorage.removeItem(this.key(b));
j.remove(this.manifest,b);g(this)},all:function(){for(var b=[],d=-1,a;a=this.manifest[++d];)b.push(this.get(a));return b}})})(Lavaca.resolve("Lavaca.storage"),Lavaca.util.StringUtils,Lavaca.util.ArrayUtils);
(function(b,h){function j(a){if(a==d)for(var b=-1,e;e=f[++b];)e(a)}var g=typeof navigator.onLine=="boolean",f=[],d="offline";navigator.userAgent.indexOf("Android");b.isOffline=function(){var a=Lavaca.resolve("navigator.connection.type");return a!==null?a==Lavaca.resolve("Connection.NONE"):g?!navigator.onLine:false};b.ajax=function(a){var c=new Lavaca.util.Promise,e=a.success,f=a.error;a.success=function(){e&&e.apply(this,arguments);c.resolve.apply(c,arguments)};a.error=function(){f&&f.apply(this,
arguments);c.reject.apply(c,arguments)};b.isOffline()?c.reject(d):h.ajax(a);c.error(j);return c};b.registerOfflineAjaxHandler=function(a){f.push(a)}})(Lavaca.resolve("Lavaca.net.Connectivity",!0),Lavaca.$);
(function(b,h,j){function g(b,c,d,e,f,g){b.position=c;e={id:d,state:e,title:f,url:g};b.sequence[c]=e;location.hash=a=g+"#@"+d;return e}var f=!(navigator.userAgent.indexOf("Android")>-1)&&typeof j.pushState=="function",d=false,a,c,e=0;b.History=h.extend(function(){h.call(this);this.sequence=[];this.position=-1;this.replace({},document.title,location.pathname);var b=this;if(f){this.onPopState=function(a){if(a.state){e--;b.trigger("popstate",{state:a.state.state,title:a.state.title,url:a.state.url})}};
window.addEventListener("popstate",this.onPopState,false)}else{this.onPopState=function(){var c=location.hash,d,f,g=-1;c&&(c=c.replace(/^#/,""));if(c!=a)if(a=c){e--;for(c=c.split("#@")[1];f=b.sequence[++g];)if(f.id==c){d=f;this.position=g;break}if(d){location.hash=d.url+"#@"+d.id;document.title=d.title;b.trigger("popstate",{state:d.state,title:d.title,url:d.url})}}};window.attachEvent?window.attachEvent("onhashchange",this.onPopState):window.addEventListener("hashchange",this.onPopState,false)}},
{current:function(){return this.sequence[this.position]||null},hasHistory:function(){return e>0},push:function(a,b,c){e++;if(d){document.title=b;f?j.pushState({state:a,title:b,url:c},b,c):g(this,++this.position,Lavaca.uuid(),a,b,c)}else this.replace(a,b,c)},replace:function(a,b,c){d=true;document.title=b;if(f)j.replaceState({state:a,title:b,url:c},b,c);else{if(this.position<0)this.position=0;var e=this.current()||{id:Lavaca.uuid()};g(this,this.position,e.id,a,b,c)}},dispose:function(){this.onPopState&&
(f?window.removeEventListener("popstate",this.onPopState,false):window.detachEvent?window.detachEvent("onhashchange",this.onPopState):window.removeEventListener("hashchange",this.onPopState,false));h.prototype.dispose.call(this)}});b.History.init=function(a){if(!c){a&&b.History.overrideStandardsMode();c=new b.History}return c};b.History.push=function(){b.History.init().push.apply(c,arguments)};b.History.replace=function(){b.History.init().replace.apply(c,arguments)};b.History.back=function(){j.back()};
b.History.forward=function(){j.forward()};b.History.dispose=function(){if(_history){c.dispose();c=null}};b.History.on=function(){return b.History.init().on.apply(c,arguments)};b.History.off=function(){return b.History.init().off.apply(c,arguments)};b.History.overrideStandardsMode=function(){f=false}})(Lavaca.resolve("Lavaca.net",!0),Lavaca.events.EventDispatcher,window.history);
(function(b,h,j){var g=new Lavaca.util.Cache,f=[];b.Template=j.extend({compile:function(){},render:function(){throw"Abstract";},process:function(b){this.code=b}});b.Template.get=function(b){return g.get(b)};b.Template.init=function(b){for(var a=-1,c;c=f[++a];)j.init(g,c.mime,function(a,b,d){return new c.js(a,b,d)},b)};b.Template.dispose=function(){j.dispose(g)};b.Template.render=function(d,a){var c=b.Template.get(d);if(c)return c.render(a);throw'No template named "'+d+'"';};b.Template.register=function(b,
a){f[f.length]={mime:b,js:a}}})(Lavaca.resolve("Lavaca.ui",!0),Lavaca.$,Lavaca.util.Map);
(function(b,h,j,g){b.DustTemplate=j.extend(function(b,d,a){j.apply(this,arguments);var c=this.prepareHelpers(),e;if(!h.helpers)h.helpers=[];for(e in c)h.helpers[e]=c[e]},{prepareHelpers:function(){return{msg:this.helperMsg,include:this.helperInclude,config:this.helperConfig}},helperMsg:function(b,d,a,c){var e=h.helpers.tap(c.key,b,d),j=h.helpers.tap(c.locale,b,d),k=g.get(e,j),e=[k],j=-1;if(!k)return a.block?b.render(a.block,d):b;for(a=c["p"+ ++j];typeof a!=="undefined";){e.push(h.helpers.tap(a,b,
d));a=c["p"+ ++j]}return b.write(Lavaca.util.StringUtils.format.apply(this,e))},helperInclude:function(b,d,a,c){var a=h.helpers.tap(c.name,b,d),e;j.render(a,d.stack.head).then(function(a){e=a});return b.write(e)},helperConfig:function(b,d,a,c){var e=h.helpers.tap(c.key,b,d),g=h.helpers.tap(c.environment,b,d),j=g?Lavaca.util.Config.get(g,e):Lavaca.util.Config.get(e),e=[j],g=-1;if(c.only||c.not){e=Lavaca.util.Config.currentEnvironment();return c.only&&e==c.only||c.not&&e!=c.not?a.block?b.render(a.block,
d):b:a["else"]?b.render(a["else"],d):b}if(!j)return a.block?b.render(a.block,d):b;for(a=c["p"+ ++g];typeof a!=="undefined";){e.push(h.helpers.tap(a,b,d));a=c["p"+ ++g]}return b.write(Lavaca.util.StringUtils.format.apply(this,e))},compile:function(){j.prototype.compile.call(this);h.loadSource(h.compile(this.code,this.name))},render:function(b){var d=new Lavaca.util.Promise(this);!this.code&&this.src&&this.load(this.src);if(this.code&&!this.compiled){this.compile();this.compiled=true}h.render(this.name,
b,function(a,b){a?d.reject(a):d.resolve(b)});return d},dispose:function(){delete h.cache[this.name];j.prototype.dispose.call(this)}});b.Template.register("text/dust-template",b.DustTemplate)})(Lavaca.ui,dust,Lavaca.ui.Template,Lavaca.util.Translation);(function(b,h,j){b.Widget=j.extend(function(b){j.call(this);this.el=b=h(b);var f=b.attr("id");if(!f){f="widget-"+Lavaca.uuid();b.attr("id",f)}this.id=f})})(Lavaca.resolve("Lavaca.ui",!0),Lavaca.$,Lavaca.events.EventDispatcher);
(function(b,h,j,g){function f(a){return a?null:"error_required"}function d(a,b){return a&&!RegExp(b.attr("pattern")).test(a)?"error_pattern":null}function a(a){return a&&!/^\w+@\w+(\.\w+)*\.\w+$/.test(a)?"error_email":null}function c(a){return a&&!/^\d?(\d{3})?\d{7}$/.test(a.replace(/\D/g,""))?"error_email":null}function e(a){return a&&!/^\d+(\.\d+)?$/.test(a)?"error_number":null}function l(a){return a&&!/^https?:\/\/\w+(\.\w+)*\.\w(:\d+)?\/\S+$/.test(a)?"error_url":null}b.Form=j.extend(function(){j.apply(this,
arguments);var a=this;this.pendingSync={};this._onChangeInput=function(b){a.onChangeInput(b)};this._onSubmit=function(b){a.onSubmit(b)};this.el.on("submit",this._onSubmit);this.addRule(this.defaultRules())},{onSubmit:function(a){a.preventDefault();this.validate().success(this.onSubmitSuccess).error(this.onSubmitError)},onSubmitSuccess:function(){},onSubmitError:function(){},onChangeInput:function(a){if(this.model){var b=h(a.target),a=b.attr("name"),b=b.val();this.pendingSync[a]=true;this.model.set(a,
b);this.pendingSync[a]=false}},onChangeModel:function(a){this.pendingSync[a.attribute]||this.set(a.attribute,a.value)},bind:function(a){this.unbind();this.model=a;a.on("change",this.onChangeModel,this);this.el.on("change",this._onChangeInput)},unbind:function(){if(this.model){this.el.off("change",this._onChangeInput);this.model.off("change",this.onchangeModel,this);this.model=null}},input:function(a){return this.el.find("input, select, textarea").filter('[name="'+a+'"]')},get:function(a){return this.input(a).val()},
set:function(a,b){this.input(a).val(b||null)},defaultRules:function(){return{"[required]":f,"[pattern]":d,"[type=email]":a,"[type=tel]":c,"[type=number]":e,"[type=url]":l}},addRule:function(a,b){if(!this.rules)this.rules=[];if(typeof a=="object")for(var c in a)this.addRule(c,a[c]);else this.rules.push({selector:a,callback:b})},values:function(){for(var a=this.el.find("input, select, textarea"),b={},c=-1,d,e,f;d=a[++c];){d=h(d);e=d.attr("type");if(!(e=="radio"||e=="checkbox")||d[0].checked){e=d.attr("name");
f=b[e];d=d.val();f instanceof Array?f.push(d):b[e]=f!==void 0?[f,d]:d}}return b},validate:function(a,b,c){if(a&&typeof a!="function"){c=a;a=null}c&&(c=h(c));for(var d=null,e=new g(this),f=-1,j,l,u,v,r,z,C,L,J;l=this.rules[++f];){u=c?c.filter(l.selector):this.el.find(l.selector);for(j=-1;v=u[++j];){v=h(v);J=v.val();if(r=l.callback.call(this,J,v,this)){z=v.attr("name");d||(d={});if(!d[z]){L=v.attr("id");C=null;L&&(C=this.el.find('label[for="'+L+'"]').text());d[z]={id:L,name:z,label:C,el:v,value:J,messages:[]}}d[z].messages.push(r)}}}d?
e.reject(d):e.resolve(this.values());return e.error(function(a){this.trigger("invalid",{inputs:a})}).success(function(a){this.trigger("valid",a)}).success(a).error(b)},dispose:function(){this.unbind();j.prototype.dispose.call(this)}});b.Form.withSubmit=function(a,c){return b.Form.extend({onSubmitSuccess:function(b){a.call(this,b)},onSubmitError:function(a){c.call(this,a)}})}})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget,Lavaca.util.Promise);
(function(b,h,j){b.LoadingIndicator=j.extend({className:"loading",show:function(){this.el.addClass(this.className)},hide:function(){this.el.removeClass(this.className)}});b.LoadingIndicator.init=function(g){function f(){d.hide()}var g=g||b.LoadingIndicator,d=new g(document.body);h(document).on("ajaxStart",function(){d.show()}).on("ajaxStop",f).on("ajaxError",f);return d}})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget);
(function(b,h,j,g){var f=["overflowScrolling","webkitOverflowScrolling","MozOverflowScrolling","OOverflowScrolling","MSOverflowScrolling"],d;(function(){for(var a=document.createElement("div").style,b=-1,e;e=f[++b];)if(e in a){d=e;break}})();b.Scrollable=j.extend(function(){j.apply(this,arguments);if(!this.iScrollOptions)this.iScrollOptions={};if(this.supportsOverflow)this.initOverflowScroll();else{this.className="synthetic-scroll";this.initIScroll()}},{supportsOverflow:!!d,className:"overflow-scroll",
iScrollOptions:null,wrapper:function(){return h('<div class="scroll-wrapper"></div>')},initOverflowScroll:function(){this.el.addClass(this.className);this.preventParentScroll()},initIScroll:function(){var a=this.wrapper(),b={},d,f;for(d in this.iScrollOptions){f=this.iScrollOptions[d];typeof f=="function"&&(f=h.proxy(f,this));b[d]=f}f=b.onBeforeScrollStart;b.onBeforeScrollStart=function(a){var b=(a.explicitOriginalTarget||a.target).nodeName;if(b!="SELECT"&&b!="OPTION"&&b!="INPUT"&&b!="TEXTAREA"&&
b!="LABEL"){a.preventDefault();a.stopPropagation()}f&&f.apply(this,arguments)};this.el.addClass(this.className);a.append(this.el.children());this.el.append(a);this.iScroll=new g(this.el[0],b);this.refresh()},refresh:function(){this.supportsOverflow||Lavaca.delay(function(){this.iScroll.refresh()},this,10)},preventParentScroll:function(){var a=this.el[0];this.el.on("touchstart",function(){startTopScroll=a.scrollTop;if(startTopScroll<=0)a.scrollTop=1;if(startTopScroll+a.offsetHeight>=a.scrollHeight)a.scrollTop=
a.scrollHeight-a.offsetHeight-1})},dispose:function(){this.isScroll&&this.iScroll.destroy();j.prototype.dispose.call(this)}})})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget,iScroll);
